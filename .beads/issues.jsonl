{"id":"bd-1","title":"Phase 1: Project Setup","description":"**EPIC: Project Foundation \u0026 Repository Structure**\n\n## Goal\nEstablish the foundational file structure, versioning, and CI/CD scaffolding that all subsequent work depends on.\n\n## Rationale\nA well-organized project structure from day one prevents technical debt accumulation. The giil project demonstrated that a clean, minimal structure with clear separation of concerns makes maintenance and contribution easier. This phase creates the skeleton that gives the project its identity.\n\n## Key Decisions Encoded\n- VERSION file as single source of truth (not package.json, not embedded in script)\n- MIT License for maximum adoption\n- Examples directory for user guidance WITHOUT polluting user's XDG config\n- No je_*.txt files in repo (those were development artifacts from original sync script)\n\n## Success Criteria\n- Repository has all foundational files in place\n- CI can at least do basic syntax validation\n- A contributor can clone and understand the structure immediately","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:15:08.191734693-05:00","closed_at":"2026-01-03T16:15:08.191734693-05:00","close_reason":"Phase 1 setup completed: VERSION, LICENSE, .gitignore exist. Remaining items (bd-104, bd-105, bd-106) can be done in parallel.","labels":["foundation","setup"]}
{"id":"bd-10","title":"Phase 10: Subcommand Implementations","description":"**EPIC: All Subcommand Implementations**\n\n## Goal\nImplement all subcommands: sync, status, init, add, list, doctor, self-update, config.\n\n## Rationale\nThe subcommand architecture provides clear separation of concerns and discoverable CLI UX. Each command has a single responsibility and can be developed/tested independently.\n\n## Command Overview\n- sync: The main event - clone missing repos, pull existing ones\n- status: Read-only view of repo states (useful before sync)\n- init: First-run setup, creates config dirs and files\n- add: Add a repo to the appropriate list file\n- list: Show configured repos (with filters)\n- doctor: System health check (deps, config, auth)\n- self-update: Update ru itself from GitHub releases\n- config: View/modify configuration values\n\n## Main Processing Loop (sync/status)\nThe core loop processes repos sequentially (parallel is v2), tracking results in NDJSON, displaying progress, and handling errors without stopping.\n\n## Success Criteria\n- All commands work correctly\n- Help text is accurate for each command\n- Exit codes are correct per command","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands","core"],"dependencies":[{"issue_id":"bd-10","depends_on_id":"bd-3","type":"blocks","created_at":"2026-01-03T16:14:08.276445145-05:00","created_by":"daemon"},{"issue_id":"bd-10","depends_on_id":"bd-4","type":"blocks","created_at":"2026-01-03T16:14:08.309247652-05:00","created_by":"daemon"},{"issue_id":"bd-10","depends_on_id":"bd-6","type":"blocks","created_at":"2026-01-03T16:14:08.339321557-05:00","created_by":"daemon"},{"issue_id":"bd-10","depends_on_id":"bd-8","type":"blocks","created_at":"2026-01-03T16:14:08.367035466-05:00","created_by":"daemon"},{"issue_id":"bd-10","depends_on_id":"bd-9","type":"blocks","created_at":"2026-01-03T16:14:08.396960711-05:00","created_by":"daemon"}]}
{"id":"bd-1001","title":"Implement cmd_sync()","description":"**Implement sync subcommand - main sync logic**\n\n## What\nThe main sync command that clones missing repos and pulls existing ones.\n\n## Why\nThis is the primary function of the tool. Everything else supports this.\n\n## Options\n- --clone-only: Only clone new repos, don't pull existing\n- --pull-only: Only pull existing repos, don't clone new\n- --autostash: Stash local changes before pull\n- --rebase: Use rebase instead of ff-only\n- --dry-run: Show what would happen\n\n## Flow\n1. Ensure dependencies (gh installed and authed)\n2. Resolve configuration\n3. Load all repos from lists\n4. For each repo:\n   a. Determine local path\n   b. If exists and is git repo: pull\n   c. If doesn't exist: clone\n   d. If exists but not git repo: warn and skip\n5. Print summary\n\n## Acceptance Criteria\n- Processes all repos\n- Handles errors without stopping\n- Reports results correctly\n- All options work","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands"],"dependencies":[{"issue_id":"bd-1001","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:11.542889231-05:00","created_by":"daemon"},{"issue_id":"bd-1001","depends_on_id":"bd-806","type":"blocks","created_at":"2026-01-03T16:14:11.572798386-05:00","created_by":"daemon"},{"issue_id":"bd-1001","depends_on_id":"bd-807","type":"blocks","created_at":"2026-01-03T16:14:11.602610107-05:00","created_by":"daemon"},{"issue_id":"bd-1001","depends_on_id":"bd-905","type":"blocks","created_at":"2026-01-03T16:14:11.632310508-05:00","created_by":"daemon"}]}
{"id":"bd-1002","title":"Implement cmd_status()","description":"**Implement status subcommand - read-only status**\n\n## What\nShow the status of all configured repos without making changes.\n\n## Why\nUsers want to see what sync would do before running it. Also useful for monitoring.\n\n## Options\n- --fetch: Fetch first to get accurate ahead/behind (default)\n- --no-fetch: Skip fetch for speed\n\n## Output Format\n```\nRepository              Status      Branch    Ahead/Behind\n────────────────────────────────────────────────────────────\nmcp_agent_mail          current     main      0/0\nrepo_updater            behind      main      0/5\nother_project           dirty       main      2/0\n```\n\n## Acceptance Criteria\n- Shows all repo statuses\n- Accurate ahead/behind with fetch\n- Indicates dirty working trees\n- No changes made to repos","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands"],"dependencies":[{"issue_id":"bd-1002","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:11.662806288-05:00","created_by":"daemon"},{"issue_id":"bd-1002","depends_on_id":"bd-802","type":"blocks","created_at":"2026-01-03T16:14:11.692906323-05:00","created_by":"daemon"},{"issue_id":"bd-1002","depends_on_id":"bd-905","type":"blocks","created_at":"2026-01-03T16:14:11.722139785-05:00","created_by":"daemon"}]}
{"id":"bd-1003","title":"Implement cmd_add()","description":"**Implement add subcommand - add repo to list**\n\n## What\nAdd a repository to the appropriate list file.\n\n## Why\nUsers need an easy way to add repos without editing files manually.\n\n## Options\n- --private: Add to private.txt instead of public.txt\n- --from-cwd: Add current directory's origin\n\n## Usage\n```bash\nru add owner/repo\nru add https://github.com/owner/repo\nru add --private company/internal-repo\nru add --from-cwd  # In a git repo\n```\n\n## Implementation\n```bash\ncmd_add() {\n    local repo=\"$1\"\n    local private=false\n    \n    # Parse options\n    # ...\n    \n    # Validate URL/shorthand\n    local host owner reponame\n    if ! parse_repo_url \"$repo\" host owner reponame; then\n        log_error \"Invalid repository: $repo\"\n        return 4\n    fi\n    \n    # Determine target file\n    local target_file\n    if [[ \"$private\" == \"true\" ]]; then\n        target_file=\"$RU_CONFIG_DIR/repos.d/private.txt\"\n    else\n        target_file=\"$RU_CONFIG_DIR/repos.d/public.txt\"\n    fi\n    \n    # Check for duplicates\n    if grep -qF \"$owner/$reponame\" \"$target_file\" 2\u003e/dev/null; then\n        log_warn \"Already in list: $owner/$reponame\"\n        return 0\n    fi\n    \n    # Append\n    echo \"$owner/$reponame\" \u003e\u003e \"$target_file\"\n    log_success \"Added to ${private:+private }list: $owner/$reponame\"\n}\n```\n\n## Acceptance Criteria\n- Adds to correct list file\n- Validates URL format\n- Detects duplicates\n- --from-cwd extracts from git remote","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands"],"dependencies":[{"issue_id":"bd-1003","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:11.752541367-05:00","created_by":"daemon"},{"issue_id":"bd-1003","depends_on_id":"bd-701","type":"blocks","created_at":"2026-01-03T16:14:11.78216274-05:00","created_by":"daemon"}]}
{"id":"bd-1004","title":"Implement cmd_list()","description":"**Implement list subcommand - show configured repos**\n\n## What\nDisplay all configured repositories.\n\n## Why\nUsers need to see what's configured without opening files.\n\n## Options\n- --public: Show only public repos\n- --private: Show only private repos\n- --paths: Show local paths instead of URLs\n\n## Output\n```bash\n# Default output\nowner/repo1\nowner/repo2\ncompany/private-repo  (private)\n\n# With --paths\n/data/projects/repo1\n/data/projects/repo2\n/data/projects/private-repo\n```\n\n## Acceptance Criteria\n- Shows all repos\n- Filters work\n- --paths shows resolved paths\n- Indicates private repos","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands"],"dependencies":[{"issue_id":"bd-1004","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:11.812007834-05:00","created_by":"daemon"},{"issue_id":"bd-1004","depends_on_id":"bd-905","type":"blocks","created_at":"2026-01-03T16:14:11.842077802-05:00","created_by":"daemon"}]}
{"id":"bd-1005","title":"Implement cmd_doctor()","description":"**Implement doctor subcommand - system diagnostics**\n\n## What\nCheck system configuration and report issues.\n\n## Why\nWhen things don't work, doctor helps diagnose why.\n\n## Checks\n1. Git version\n2. gh installed and version\n3. gh authentication status\n4. Config directory exists\n5. Repos configured\n6. Projects directory exists and writable\n7. gum availability (optional)\n\n## Output\n```\nSystem Check\n────────────────────────────────────────\n[OK] git: 2.43.0\n[OK] gh: 2.40.1 (authenticated as user)\n[OK] Config: ~/.config/ru\n[OK] Repos: 47 configured\n[OK] Projects: /data/projects (writable)\n[  ] gum: not installed (optional)\n\nAll checks passed!\n```\n\n## Acceptance Criteria\n- All checks run\n- Clear pass/fail indicators\n- Helpful for troubleshooting","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands"],"dependencies":[{"issue_id":"bd-1005","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:11.872547413-05:00","created_by":"daemon"},{"issue_id":"bd-1005","depends_on_id":"bd-602","type":"blocks","created_at":"2026-01-03T16:14:11.904213728-05:00","created_by":"daemon"},{"issue_id":"bd-1005","depends_on_id":"bd-603","type":"blocks","created_at":"2026-01-03T16:14:11.935640482-05:00","created_by":"daemon"}]}
{"id":"bd-1006","title":"Implement cmd_self_update()","description":"**Implement self-update subcommand**\n\n## What\nUpdate ru itself to the latest version from GitHub releases.\n\n## Why\nUsers shouldn't have to re-run the installer to update.\n\n## Options\n- --check: Check for updates without installing\n\n## Flow\n1. Get current version from $VERSION\n2. Fetch latest release tag from GitHub API\n3. Compare versions\n4. If newer, download and verify checksum\n5. Replace current script\n\n## Implementation Notes\n- Use gh api for authenticated requests\n- Verify SHA256 checksum\n- Atomic replacement (write to temp, then mv)\n\n## Acceptance Criteria\n- Checks for updates\n- Downloads securely with checksum\n- Atomic update (no partial writes)\n- --check only reports, doesn't update","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands"],"dependencies":[{"issue_id":"bd-1006","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:11.965865062-05:00","created_by":"daemon"},{"issue_id":"bd-1006","depends_on_id":"bd-202","type":"blocks","created_at":"2026-01-03T16:14:11.995827747-05:00","created_by":"daemon"}]}
{"id":"bd-1007","title":"Implement process_single_repo()","description":"**Orchestrate processing of a single repository**\n\n## What\nFunction that handles all logic for one repo: check status, decide action, execute.\n\n## Why\nCentralizes the per-repo logic that sync and status share.\n\n## Flow\n```\n1. Parse repo spec (URL, branch, custom name)\n2. Resolve local path\n3. Check if path exists\n4. If exists:\n   a. Verify it's a git repo\n   b. Check remote URL matches\n   c. Get status (behind/ahead/dirty)\n   d. Execute action (pull/skip)\n5. If not exists:\n   a. Clone repo\n6. Record result\n```\n\n## Implementation\n```bash\nprocess_single_repo() {\n    local spec=\"$1\"\n    local action=\"$2\"  # sync|status\n    \n    local url branch local_name\n    parse_repo_spec \"$spec\" url branch local_name\n    \n    local path\n    if [[ -n \"$local_name\" ]]; then\n        path=\"$PROJECTS_DIR/$local_name\"\n    else\n        path=$(url_to_local_path \"$url\" \"$PROJECTS_DIR\" \"$LAYOUT\")\n    fi\n    \n    local repo_name\n    repo_name=$(basename \"$path\")\n    \n    log_step \"Processing: $repo_name\"\n    \n    if [[ -d \"$path\" ]]; then\n        if ! is_git_repo \"$path\"; then\n            log_warn \"Not a git repo: $path\"\n            write_result \"$repo_name\" \"skip\" \"not_git\" \"\" \"\"\n            return 0\n        fi\n        \n        if ! check_remote_mismatch \"$path\" \"$url\"; then\n            log_warn \"Remote mismatch, skipping: $repo_name\"\n            write_result \"$repo_name\" \"skip\" \"remote_mismatch\" \"\" \"\"\n            return 0\n        fi\n        \n        if [[ \"$action\" == \"sync\" ]]; then\n            do_pull \"$path\" \"$repo_name\" \"$UPDATE_STRATEGY\"\n        else\n            # status only\n            local status\n            status=$(get_repo_status \"$path\" \"true\")\n            # Report status...\n        fi\n    else\n        if [[ \"$action\" == \"sync\" ]]; then\n            do_clone \"$url\" \"$path\" \"$repo_name\"\n        else\n            log_info \"Not cloned: $repo_name\"\n            write_result \"$repo_name\" \"status\" \"missing\" \"\" \"\"\n        fi\n    fi\n}\n```\n\n## Acceptance Criteria\n- Handles all cases\n- Records all results\n- Doesn't stop on errors","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands"],"dependencies":[{"issue_id":"bd-1007","depends_on_id":"bd-801","type":"blocks","created_at":"2026-01-03T16:14:12.025226921-05:00","created_by":"daemon"},{"issue_id":"bd-1007","depends_on_id":"bd-804","type":"blocks","created_at":"2026-01-03T16:14:12.054912164-05:00","created_by":"daemon"},{"issue_id":"bd-1007","depends_on_id":"bd-806","type":"blocks","created_at":"2026-01-03T16:14:12.116140631-05:00","created_by":"daemon"},{"issue_id":"bd-1007","depends_on_id":"bd-807","type":"blocks","created_at":"2026-01-03T16:14:12.150654873-05:00","created_by":"daemon"}]}
{"id":"bd-1008","title":"Implement main processing loop","description":"**Main loop with progress display**\n\n## What\nThe loop that iterates through all repos with progress indication.\n\n## Why\nUsers need to see progress during long operations.\n\n## Progress Display\n```\n→ Processing 12/47: coding_agent_session_search\n  ├─ Path: /data/projects/coding_agent_session_search\n  ├─ Status: behind (0 ahead, 3 behind)\n  ├─ Action: git pull --ff-only\n  └─ Result: Updated (2s)\n```\n\n## Implementation\n```bash\nrun_processing_loop() {\n    local action=\"$1\"  # sync|status\n    local repos\n    repos=$(get_all_repos)\n    \n    if [[ -z \"$repos\" ]]; then\n        log_info \"No repositories to process.\"\n        return 0\n    fi\n    \n    local total\n    total=$(echo \"$repos\" | wc -l)\n    local current=0\n    \n    while IFS= read -r spec; do\n        ((current++))\n        log_step \"Processing $current/$total: $(basename \"$spec\")\"\n        process_single_repo \"$spec\" \"$action\"\n    done \u003c\u003c\u003c \"$repos\"\n}\n```\n\n## Acceptance Criteria\n- Shows progress (N/M)\n- Processes all repos\n- Continues on errors\n- Works with empty list","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands"],"dependencies":[{"issue_id":"bd-1008","depends_on_id":"bd-1007","type":"blocks","created_at":"2026-01-03T16:14:12.181635576-05:00","created_by":"daemon"},{"issue_id":"bd-1008","depends_on_id":"bd-905","type":"blocks","created_at":"2026-01-03T16:14:12.212359917-05:00","created_by":"daemon"}]}
{"id":"bd-1009","title":"Implement cmd_remove()","description":"**Implement remove subcommand - remove repo from list**\n\n## What\nThe `ru remove` command to remove a repository from the list.\n\n## Why\nUsers need to remove repos without manually editing list files. This is a fundamental CRUD operation that was missing from the original plan.\n\n## Usage\n```bash\nru remove owner/repo\nru remove owner/repo --all  # Remove from all lists\nru remove --from-cwd        # Remove current directory's repo\n```\n\n## Implementation\n```bash\ncmd_remove() {\n    local repo=\"$1\"\n    local list_file=\"$RU_CONFIG_DIR/repos.d/repos.txt\"\n    \n    if [[ ! -f \"$list_file\" ]]; then\n        log_error \"No repos configured\"\n        return 1\n    fi\n    \n    # Find and remove matching line\n    local pattern\n    pattern=$(echo \"$repo\" | sed 's/[.[\\/^$*]/\\\\\u0026/g')\n    \n    if grep -q \"$pattern\" \"$list_file\"; then\n        sed -i \"/$pattern/d\" \"$list_file\"\n        log_success \"Removed: $repo\"\n    else\n        log_warn \"Not found in list: $repo\"\n        return 1\n    fi\n}\n```\n\n## Acceptance Criteria\n- Removes repo from list\n- Handles 'not found' gracefully\n- Works with partial matches (owner/repo matches full URL)\n- --from-cwd extracts from git remote","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands"],"dependencies":[{"issue_id":"bd-1009","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:13.403168479-05:00","created_by":"daemon"},{"issue_id":"bd-1009","depends_on_id":"bd-901","type":"blocks","created_at":"2026-01-03T16:14:13.433158697-05:00","created_by":"daemon"}]}
{"id":"bd-101","title":"Create VERSION file","description":"**Create VERSION file with initial version 1.0.0**\n\n## What\nCreate a VERSION file at the repository root containing the semver version string.\n\n## Why\nSingle source of truth for version. The script reads this file, CI validates consistency, and releases are tagged from it. No version strings embedded in multiple places.\n\n## Implementation\n```bash\necho '1.0.0' \u003e VERSION\n```\n\n## Acceptance Criteria\n- VERSION file exists at repo root\n- Contains exactly '1.0.0' (no trailing newline issues)\n- Is readable by shell: `cat VERSION`","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:30.470606513-05:00","closed_at":"2026-01-03T16:10:30.470606513-05:00","close_reason":"VERSION file already exists (1.0.0)","labels":["setup"],"dependencies":[{"issue_id":"bd-101","depends_on_id":"bd-1","type":"blocks","created_at":"2026-01-03T16:14:08.744605613-05:00","created_by":"daemon"}]}
{"id":"bd-1010","title":"Implement cmd_prune()","description":"**Implement prune subcommand - find orphan repos**\n\n## What\nThe `ru prune` command to identify and optionally archive repos in PROJECTS_DIR that aren't in any list.\n\n## Why\nOver time, users clone repos manually or remove entries from lists. These 'orphan' repos waste disk space and cause confusion. The prune command helps identify them.\n\n## Usage\n```bash\nru prune              # List orphans (dry run)\nru prune --archive    # Move orphans to ~/.local/state/ru/archived/\nru prune --delete     # Actually delete (requires confirmation)\n```\n\n## Implementation\n```bash\ncmd_prune() {\n    local action=\"${1:-list}\"\n    local configured_paths\n    configured_paths=$(get_all_repos | while read spec; do\n        url_to_local_path \"$spec\" \"$PROJECTS_DIR\" \"$LAYOUT\"\n    done | sort -u)\n    \n    # Find all git repos in PROJECTS_DIR\n    local actual_repos\n    actual_repos=$(find \"$PROJECTS_DIR\" -maxdepth 2 -name .git -type d | \\\n        xargs -I{} dirname {} | sort -u)\n    \n    # Find orphans (in actual but not in configured)\n    local orphans\n    orphans=$(comm -23 \u003c(echo \"$actual_repos\") \u003c(echo \"$configured_paths\"))\n    \n    if [[ -z \"$orphans\" ]]; then\n        log_info \"No orphan repositories found\"\n        return 0\n    fi\n    \n    echo \"$orphans\" | while read path; do\n        log_warn \"Orphan: $path\"\n    done\n    \n    # Handle archive/delete based on action\n}\n```\n\n## Safety\n- Default is LIST ONLY (dry run)\n- Archive moves to dated subfolder, never deletes\n- Delete requires explicit --delete AND confirmation\n\n## Acceptance Criteria\n- Identifies repos not in any list\n- Safe default (list only)\n- Archive preserves repos safely\n- Never deletes without explicit confirmation","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands"],"dependencies":[{"issue_id":"bd-1010","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:13.465248731-05:00","created_by":"daemon"},{"issue_id":"bd-1010","depends_on_id":"bd-905","type":"blocks","created_at":"2026-01-03T16:14:13.496361533-05:00","created_by":"daemon"},{"issue_id":"bd-1010","depends_on_id":"bd-703","type":"blocks","created_at":"2026-01-03T16:14:13.527218564-05:00","created_by":"daemon"}]}
{"id":"bd-1011","title":"Implement parallel sync with worker pool","description":"**Implement parallel sync with worker pool**\n\n## What\nAdd `--parallel N` (or `-j N`) option to sync N repos concurrently.\n\n## Why\nSyncing 50+ repos sequentially takes minutes. With parallelism, we can saturate the network and reduce total time dramatically.\n\n## Design (from plan section 15.1)\n- Worker pool pattern with configurable worker count\n- Default: `PARALLEL=1` (sequential, current behavior)\n- Option: `--parallel N` or `-j N` (N workers)\n- Each worker writes to shared NDJSON results file (atomic appends)\n- Progress: single progress bar showing completed/total instead of per-repo spinners\n- Rate limiting awareness: if we detect 429s, auto-reduce parallelism\n\n## Implementation Sketch\n```bash\nPARALLEL=${PARALLEL:-1}\nif [[ \"$PARALLEL\" -gt 1 ]]; then\n    # Create a work queue (one line per repo)\n    printf '%s\\n' \"${repos[@]}\" \u003e \"$WORK_QUEUE\"\n    \n    # Launch N workers\n    for ((i=0; i\u003cPARALLEL; i++)); do\n        (\n            while IFS= read -r repo; do\n                process_single_repo \"$repo\"\n            done \u003c \u003c(flock -x 200; head -1 \"$WORK_QUEUE\"; sed -i '1d' \"$WORK_QUEUE\")\n        ) 200\u003e\"$LOCK_FILE\" \u0026\n        worker_pids+=($!)\n    done\n    \n    # Wait for all workers\n    wait \"${worker_pids[@]}\"\nfi\n```\n\n## Progress Display\n```\nSyncing repositories [=====\u003e          ] 23/47 (49%)\n```\n\n## Acceptance Criteria\n- `--parallel 4` processes 4 repos concurrently\n- NDJSON results are correctly aggregated\n- Progress bar shows overall completion\n- Works correctly when some repos fail\n- No race conditions in result file writes\n- Config file can set default PARALLEL value","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["performance","v1-stretch"],"dependencies":[{"issue_id":"bd-1011","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:14.01343846-05:00","created_by":"daemon"},{"issue_id":"bd-1011","depends_on_id":"bd-1001","type":"blocks","created_at":"2026-01-03T16:14:14.043409351-05:00","created_by":"daemon"},{"issue_id":"bd-1011","depends_on_id":"bd-1105","type":"blocks","created_at":"2026-01-03T16:14:14.073618481-05:00","created_by":"daemon"}]}
{"id":"bd-1012","title":"Implement resume for interrupted syncs","description":"**Implement resume for interrupted syncs**\n\n## What\nAllow `ru sync --resume` to continue an interrupted sync from where it left off.\n\n## Why\nSyncing 50+ repos over slow network can take 10+ minutes. If interrupted (Ctrl-C, network drop, laptop sleep), users shouldn't have to re-clone repos that were already completed.\n\n## Design\n\n### State File\n```bash\n# ~/.local/state/ru/sync_state.json\n{\n  \"run_id\": \"2026-01-03T14:30:00Z\",\n  \"status\": \"in_progress\",\n  \"config_hash\": \"abc123\",  # Hash of repos list to detect changes\n  \"completed\": [\"repo1\", \"repo2\", \"repo3\"],\n  \"pending\": [\"repo4\", \"repo5\", ...],\n  \"results_file\": \"/path/to/partial_results.ndjson\"\n}\n```\n\n### Flow\n1. On sync start:\n   - Check for existing state file with `status=in_progress`\n   - If found and `--resume`: load completed list, skip those repos\n   - If found but no `--resume`: warn user and ask to continue or restart\n   - Write new state file with all repos as pending\n\n2. During sync:\n   - After each repo completes, move from pending to completed\n   - Write state atomically (write to temp, rename)\n\n3. On sync complete:\n   - Set `status=completed`\n   - Clean up state file (or archive for history)\n\n4. On interrupt (trap):\n   - State file remains with `status=in_progress`\n   - Results file preserved with partial results\n\n### CLI\n```bash\nru sync              # Normal sync (warns if interrupted state exists)\nru sync --resume     # Resume interrupted sync\nru sync --restart    # Discard interrupted state, start fresh\n```\n\n## Acceptance Criteria\n- Interrupted syncs can be resumed\n- Already-completed repos are skipped on resume\n- Config changes (new repos added) are handled gracefully\n- State file is cleaned up on successful completion\n- Works correctly with parallel sync","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["resilience","v1-stretch"],"dependencies":[{"issue_id":"bd-1012","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:14.103639607-05:00","created_by":"daemon"},{"issue_id":"bd-1012","depends_on_id":"bd-1001","type":"blocks","created_at":"2026-01-03T16:14:14.153888316-05:00","created_by":"daemon"},{"issue_id":"bd-1012","depends_on_id":"bd-404","type":"blocks","created_at":"2026-01-03T16:14:14.189173009-05:00","created_by":"daemon"}]}
{"id":"bd-102","title":"Create LICENSE file (MIT)","description":"**Create MIT License file**\n\n## What\nAdd standard MIT License with correct copyright holder.\n\n## Why\nMIT License maximizes adoption - permissive, well-understood, corporate-friendly. Users and contributors need clear licensing.\n\n## Implementation\nStandard MIT text with 'Dicklesworthstone' as copyright holder, current year.\n\n## Acceptance Criteria\n- LICENSE file at repo root\n- MIT license text\n- Correct copyright year and holder","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:30.526840208-05:00","closed_at":"2026-01-03T16:10:30.526840208-05:00","close_reason":"LICENSE file already exists (MIT)","labels":["legal","setup"],"dependencies":[{"issue_id":"bd-102","depends_on_id":"bd-1","type":"blocks","created_at":"2026-01-03T16:14:08.773545622-05:00","created_by":"daemon"}]}
{"id":"bd-103","title":"Create .gitignore","description":"**Create .gitignore for runtime artifacts**\n\n## What\nIgnore temporary files, logs, and user-specific artifacts.\n\n## Why\nPrevents accidental commits of runtime state, keeps repo clean.\n\n## Patterns to Ignore\n- *.log (log files)\n- .DS_Store (macOS)\n- *.swp, *~ (editor temps)\n- /tmp/ (if we use local temp)\n- Any test output directories\n\n## What NOT to Ignore\n- examples/*.txt (these are shipped)\n- scripts/*.sh (these are shipped)\n\n## Acceptance Criteria\n- .gitignore exists\n- Runtime artifacts don't appear in git status","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:30.558229121-05:00","closed_at":"2026-01-03T16:10:30.558229121-05:00","close_reason":".gitignore already exists","labels":["setup"],"dependencies":[{"issue_id":"bd-103","depends_on_id":"bd-1","type":"blocks","created_at":"2026-01-03T16:14:08.803640297-05:00","created_by":"daemon"}]}
{"id":"bd-104","title":"Create .github/workflows directory","description":"**Create GitHub workflows directory structure**\n\n## What\nCreate .github/workflows/ directory with placeholder ci.yml and release.yml files.\n\n## Why\nEstablishes CI/CD structure. Even placeholder files communicate intent and can be fleshed out incrementally.\n\n## Implementation\n```bash\nmkdir -p .github/workflows\ntouch .github/workflows/ci.yml\ntouch .github/workflows/release.yml\n```\n\n## Acceptance Criteria\n- .github/workflows/ directory exists\n- ci.yml and release.yml files exist (can be minimal placeholders)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:16:20.264550091-05:00","closed_at":"2026-01-03T16:16:20.264550091-05:00","close_reason":"Phase 1 remaining tasks completed","labels":["ci","setup"],"dependencies":[{"issue_id":"bd-104","depends_on_id":"bd-1","type":"blocks","created_at":"2026-01-03T16:14:08.832533978-05:00","created_by":"daemon"}]}
{"id":"bd-105","title":"Create examples/ directory with sample lists","description":"**Create examples directory with sample repo lists**\n\n## What\nCreate examples/ directory containing public.txt (with example repos) and private.template.txt (empty template).\n\n## Why\nUsers need examples to understand the list format. The template shows structure without committing actual private repos.\n\n## Content: examples/public.txt\n```\n# Example public repositories\n# Add your own repos below\n\n# Format examples:\n# https://github.com/owner/repo\n# owner/repo\n# owner/repo@branch\n# owner/repo as local-name\n\ncharmbracelet/gum\ncli/cli\n```\n\n## Content: examples/private.template.txt\n```\n# Private repositories template\n# Copy this to ~/.config/ru/repos.d/private.txt\n# Add your private repos below\n\n```\n\n## Acceptance Criteria\n- examples/public.txt exists with example content\n- examples/private.template.txt exists as empty template\n- Format examples are documented in comments","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:16:20.267036655-05:00","closed_at":"2026-01-03T16:16:20.267036655-05:00","close_reason":"Phase 1 remaining tasks completed","labels":["docs","setup"],"dependencies":[{"issue_id":"bd-105","depends_on_id":"bd-1","type":"blocks","created_at":"2026-01-03T16:14:08.860720146-05:00","created_by":"daemon"}]}
{"id":"bd-106","title":"Ensure no je_*.txt files in repo","description":"**Remove/ignore legacy je_*.txt files**\n\n## What\nEnsure no je_public_github_repos.txt or similar development artifacts are committed.\n\n## Why\nThese were development files from the original sync script. They shouldn't ship - user lists belong in XDG config, not the repo. Their presence confuses the packaging story.\n\n## Implementation\n- Add je_*.txt to .gitignore\n- If any exist, remove from git tracking: `git rm --cached je_*.txt`\n\n## Acceptance Criteria\n- No je_*.txt files in repository\n- Pattern added to .gitignore for safety","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:16:20.26860041-05:00","closed_at":"2026-01-03T16:16:20.26860041-05:00","close_reason":"Phase 1 remaining tasks completed","labels":["cleanup","setup"],"dependencies":[{"issue_id":"bd-106","depends_on_id":"bd-1","type":"blocks","created_at":"2026-01-03T16:14:08.889644175-05:00","created_by":"daemon"}]}
{"id":"bd-11","title":"Phase 11: Reporting \u0026 Summary","description":"**EPIC: Summary Reports \u0026 Conflict Resolution Help**\n\n## Goal\nGenerate beautiful summary reports and actionable conflict resolution guidance.\n\n## Rationale\nAfter processing dozens of repos, users need a clear summary: what succeeded, what failed, what needs attention. For repos with issues, we provide copy-pasteable commands to resolve them.\n\n## Summary Components\n- Counts: cloned, updated, current, conflicts, failed\n- Timing: total duration, per-phase breakdowns\n- Log location: where to find detailed logs\n\n## Conflict Resolution Help\nFor each problematic repo, we show:\n- What the issue is (dirty tree, diverged, auth failure)\n- Multiple resolution options with exact commands\n- Risk level of each option (e.g., 'DESTRUCTIVE' warning)\n\n## JSON Report\nIn --json mode, stdout gets a structured report with all details, suitable for further processing or dashboards.\n\n## Success Criteria\n- Summary displays after every sync/status run\n- Conflict resolution commands are correct and copy-pasteable\n- JSON output is valid and complete","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["reporting","ui"],"dependencies":[{"issue_id":"bd-11","depends_on_id":"bd-4","type":"blocks","created_at":"2026-01-03T16:14:08.424659852-05:00","created_by":"daemon"},{"issue_id":"bd-11","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:08.452858654-05:00","created_by":"daemon"}]}
{"id":"bd-1101","title":"Implement aggregate_results()","description":"**Parse NDJSON results file**\n\n## What\nFunction to aggregate results from the temp NDJSON file into summary counts.\n\n## Why\nAfter processing, we need to summarize: how many cloned, updated, failed, etc.\n\n## Implementation\n```bash\naggregate_results() {\n    local cloned=0 updated=0 current=0 failed=0 conflicts=0 skipped=0\n    \n    while IFS= read -r line; do\n        local status\n        status=$(echo \"$line\" | jq -r '.status')\n        \n        case \"$status\" in\n            ok)       ((cloned++)) ;;\n            updated)  ((updated++)) ;;\n            current)  ((current++)) ;;\n            failed)   ((failed++)) ;;\n            diverged|conflict) ((conflicts++)) ;;\n            *)        ((skipped++)) ;;\n        esac\n    done \u003c \"$RESULTS_FILE\"\n    \n    echo \"CLONED=$cloned UPDATED=$updated CURRENT=$current FAILED=$failed CONFLICTS=$conflicts SKIPPED=$skipped\"\n}\n```\n\n## Note on jq\njq is optional but makes parsing easier. Fall back to grep/sed if unavailable.\n\n## Acceptance Criteria\n- Counts all status types\n- Handles empty file\n- Works without jq (fallback)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["reporting"],"dependencies":[{"issue_id":"bd-1101","depends_on_id":"bd-11","type":"blocks","created_at":"2026-01-03T16:14:12.241751016-05:00","created_by":"daemon"},{"issue_id":"bd-1101","depends_on_id":"bd-405","type":"blocks","created_at":"2026-01-03T16:14:12.271896596-05:00","created_by":"daemon"}]}
{"id":"bd-1102","title":"Implement print_summary()","description":"**Print styled summary box**\n\n## What\nFunction to display the final summary in a beautiful box.\n\n## Why\nA clear summary shows users what happened at a glance.\n\n## Output Design\n```\n╭─────────────────────────────────────────────────────────────╮\n│                    Sync Summary                             │\n├─────────────────────────────────────────────────────────────┤\n│  Cloned:     8 repos                                        │\n│  Updated:   31 repos                                        │\n│  Current:    3 repos (already up to date)                   │\n│  Conflicts:  2 repos (need attention)                       │\n│  Failed:     0 repos                                        │\n├─────────────────────────────────────────────────────────────┤\n│  Total: 47 repos processed in 2m 34s                        │\n│  Logs: ~/.local/state/ru/logs/2026-01-03/                   │\n╰─────────────────────────────────────────────────────────────╯\n```\n\n## Implementation\nUse gum style for box if available, ANSI fallback otherwise.\n\n## Acceptance Criteria\n- Shows all counts\n- Shows timing\n- Shows log location\n- Beautiful with gum, acceptable without","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["reporting","ui"],"dependencies":[{"issue_id":"bd-1102","depends_on_id":"bd-1101","type":"blocks","created_at":"2026-01-03T16:14:12.301743123-05:00","created_by":"daemon"},{"issue_id":"bd-1102","depends_on_id":"bd-504","type":"blocks","created_at":"2026-01-03T16:14:12.332586268-05:00","created_by":"daemon"}]}
{"id":"bd-1103","title":"Implement print_conflict_help()","description":"**Print actionable conflict resolution**\n\n## What\nFor repos with issues, show exactly how to resolve them.\n\n## Why\nUsers shouldn't have to figure out resolution commands themselves.\n\n## Output Design\n```\nRepositories Needing Attention\n─────────────────────────────────────────────────────────────\n\n1. mcp_agent_mail\n   Path:   /data/projects/mcp_agent_mail\n   Branch: main\n   Issue:  Dirty working tree (3 files modified)\n\n   Resolution options:\n     a) Stash and pull:\n        cd /data/projects/mcp_agent_mail \u0026\u0026 git stash \u0026\u0026 git pull \u0026\u0026 git stash pop\n\n     b) Commit your changes:\n        cd /data/projects/mcp_agent_mail \u0026\u0026 git add . \u0026\u0026 git commit -m \"WIP\"\n\n     c) Discard local changes (DESTRUCTIVE):\n        cd /data/projects/mcp_agent_mail \u0026\u0026 git checkout . \u0026\u0026 git clean -fd\n```\n\n## Acceptance Criteria\n- Lists all problematic repos\n- Shows specific issue\n- Provides copy-paste commands\n- Warns about destructive options","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["reporting"],"dependencies":[{"issue_id":"bd-1103","depends_on_id":"bd-1101","type":"blocks","created_at":"2026-01-03T16:14:12.362760602-05:00","created_by":"daemon"}]}
{"id":"bd-1104","title":"Implement generate_json_report()","description":"**Generate JSON output for --json mode**\n\n## What\nFunction to output complete JSON report to stdout.\n\n## Why\nAutomation and scripting need structured output.\n\n## JSON Structure\n```json\n{\n  \"version\": \"1.0.0\",\n  \"timestamp\": \"2026-01-03T14:30:00Z\",\n  \"duration_seconds\": 154,\n  \"config\": {\n    \"projects_dir\": \"/data/projects\",\n    \"layout\": \"flat\",\n    \"update_strategy\": \"ff-only\"\n  },\n  \"summary\": {\n    \"total\": 47,\n    \"cloned\": 8,\n    \"updated\": 34,\n    \"current\": 3,\n    \"conflicts\": 2,\n    \"failed\": 0\n  },\n  \"repos\": [\n    {\n      \"name\": \"repo1\",\n      \"path\": \"/data/projects/repo1\",\n      \"action\": \"pull\",\n      \"status\": \"updated\",\n      \"duration\": 2\n    }\n  ]\n}\n```\n\n## Acceptance Criteria\n- Valid JSON\n- Includes all results\n- Goes to stdout only\n- jq can parse it","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["json","reporting"],"dependencies":[{"issue_id":"bd-1104","depends_on_id":"bd-1101","type":"blocks","created_at":"2026-01-03T16:14:12.391426765-05:00","created_by":"daemon"},{"issue_id":"bd-1104","depends_on_id":"bd-403","type":"blocks","created_at":"2026-01-03T16:14:12.421640684-05:00","created_by":"daemon"}]}
{"id":"bd-1105","title":"Implement compute_exit_code()","description":"**Calculate appropriate exit code**\n\n## What\nFunction to determine exit code based on results.\n\n## Why\nMeaningful exit codes enable scripting and CI integration.\n\n## Exit Code Logic\n```bash\ncompute_exit_code() {\n    local failed=\"$1\"\n    local conflicts=\"$2\"\n\n    if [[ \"$failed\" -gt 0 ]]; then\n        return 1  # Partial failure\n    elif [[ \"$conflicts\" -gt 0 ]]; then\n        return 2  # Conflicts exist\n    else\n        return 0  # Success\n    fi\n}\n```\n\n## Exit Codes\n- 0: All repos synced or current\n- 1: Some repos failed (network, auth, etc.)\n- 2: Conflicts exist (diverged, dirty, etc.)\n- 3: Dependency error (gh missing, etc.) - set earlier\n- 4: Invalid arguments - set earlier\n\n## Acceptance Criteria\n- Correct code for all scenarios\n- Documented behavior\n- CI can act on codes","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["reporting"],"dependencies":[{"issue_id":"bd-1105","depends_on_id":"bd-1101","type":"blocks","created_at":"2026-01-03T16:14:12.452464252-05:00","created_by":"daemon"}]}
{"id":"bd-12","title":"Phase 12: Installation Script","description":"**EPIC: Curl-Bash Installation Script**\n\n## Goal\nCreate a secure, user-friendly installation script that downloads ru from GitHub releases with checksum verification.\n\n## Rationale\nOne-liner installation is the gold standard for CLI tools. But security matters: we download from releases (immutable, versioned) with checksum verification, not from main branch (mutable, unverified). The installer respects user choice for install location.\n\n## Security Measures\n- Default: Download from GitHub Release with SHA256 verification\n- Checksum fetched separately and verified before execution\n- RU_UNSAFE_MAIN=1 required to install from main branch (for development)\n\n## Installation Locations\n- Default: ~/.local/bin (user-local, no sudo)\n- RU_SYSTEM=1: /usr/local/bin (system-wide, requires sudo)\n- DEST=/custom/path: User-specified location\n\n## PATH Handling\nIf install location isn't in PATH, we offer to add it to shell config (.bashrc, .zshrc, etc.) with user confirmation.\n\n## Success Criteria\n- `curl ... | bash` installs successfully\n- Checksum verification works and fails on mismatch\n- PATH addition is offered when needed","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["distribution","installer"],"dependencies":[{"issue_id":"bd-12","depends_on_id":"bd-1","type":"blocks","created_at":"2026-01-03T16:14:08.481794705-05:00","created_by":"daemon"}]}
{"id":"bd-1201","title":"Create install.sh skeleton","description":"**Create installer script with header and secure defaults**\n\n## What\nCreate install.sh with proper header, usage, and security-first defaults.\n\n## Why\nThe installer is the first thing users run. It must be secure, clear, and work reliably.\n\n## Header Content\n```bash\n#!/usr/bin/env bash\n#\n# ru installer\n# Downloads and installs ru (Repo Updater)\n#\n# DEFAULT: Downloads from GitHub Release with checksum verification\n#\n# Usage:\n#   curl -fsSL https://raw.githubusercontent.com/.../install.sh | bash\n#\n# Options (via environment):\n#   DEST=/path/to/dir      Install directory (default: ~/.local/bin)\n#   RU_SYSTEM=1            Install to /usr/local/bin (requires sudo)\n#   RU_VERSION=x.y.z       Install specific version (default: latest)\n#   RU_UNSAFE_MAIN=1       Install from main branch (NOT RECOMMENDED)\n\nset -euo pipefail\n```\n\n## Security Default\n- NEVER install from main branch without explicit RU_UNSAFE_MAIN=1\n- Always verify checksums for release downloads\n\n## Acceptance Criteria\n- Clear usage documentation\n- Secure defaults\n- All options documented","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["installer"],"dependencies":[{"issue_id":"bd-1201","depends_on_id":"bd-12","type":"blocks","created_at":"2026-01-03T16:14:12.482442467-05:00","created_by":"daemon"}]}
{"id":"bd-1202","title":"Implement get_latest_release()","description":"**Fetch latest release version from GitHub API**\n\n## What\nFunction to get the latest release tag from GitHub.\n\n## Why\nDefault behavior is to install latest release. We need to know what that is.\n\n## Implementation\n```bash\nget_latest_release() {\n    local repo=\"$REPO_OWNER/$REPO_NAME\"\n    local url=\"https://api.github.com/repos/$repo/releases/latest\"\n    \n    if command -v curl \u0026\u003e/dev/null; then\n        curl -fsSL \"$url\" | grep '\"tag_name\"' | cut -d'\"' -f4\n    elif command -v wget \u0026\u003e/dev/null; then\n        wget -qO- \"$url\" | grep '\"tag_name\"' | cut -d'\"' -f4\n    else\n        echo \"Error: curl or wget required\" \u003e\u00262\n        return 1\n    fi\n}\n```\n\n## Note\nWe don't require jq - just grep/cut for portability.\n\n## Acceptance Criteria\n- Returns version tag (e.g., v1.0.0)\n- Works with curl or wget\n- Handles API errors gracefully","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["installer"],"dependencies":[{"issue_id":"bd-1202","depends_on_id":"bd-1201","type":"blocks","created_at":"2026-01-03T16:14:12.512280287-05:00","created_by":"daemon"}]}
{"id":"bd-1203","title":"Implement download_and_verify()","description":"**Download release with checksum verification**\n\n## What\nFunction to download ru from a release and verify its checksum.\n\n## Why\nChecksum verification ensures the download wasn't corrupted or tampered with.\n\n## Implementation\n```bash\ndownload_and_verify() {\n    local version=\"$1\"\n    local dest=\"$2\"\n    local repo=\"$REPO_OWNER/$REPO_NAME\"\n    local base_url=\"https://github.com/$repo/releases/download/$version\"\n    \n    local temp_dir\n    temp_dir=$(mktemp -d)\n    trap \"rm -rf '$temp_dir'\" EXIT\n    \n    # Download script and checksum\n    echo \"Downloading ru $version...\" \u003e\u00262\n    curl -fsSL \"$base_url/ru\" -o \"$temp_dir/ru\"\n    curl -fsSL \"$base_url/ru.sha256\" -o \"$temp_dir/ru.sha256\"\n    \n    # Verify checksum\n    echo \"Verifying checksum...\" \u003e\u00262\n    cd \"$temp_dir\"\n    if ! sha256sum -c ru.sha256 --quiet 2\u003e/dev/null; then\n        # Try macOS shasum\n        if ! shasum -a 256 -c ru.sha256 --quiet 2\u003e/dev/null; then\n            echo \"ERROR: Checksum verification failed!\" \u003e\u00262\n            echo \"The download may be corrupted or tampered with.\" \u003e\u00262\n            return 1\n        fi\n    fi\n    \n    # Install\n    chmod +x \"$temp_dir/ru\"\n    mv \"$temp_dir/ru\" \"$dest/ru\"\n    \n    echo \"Installed ru $version to $dest\" \u003e\u00262\n}\n```\n\n## Acceptance Criteria\n- Downloads from release\n- Verifies SHA256\n- Fails clearly on mismatch\n- Works on Linux and macOS","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["installer","security"],"dependencies":[{"issue_id":"bd-1203","depends_on_id":"bd-1202","type":"blocks","created_at":"2026-01-03T16:14:12.541637723-05:00","created_by":"daemon"}]}
{"id":"bd-1204","title":"Implement get_install_dir() and get_shell_config()","description":"**Determine installation directory and shell config**\n\n## What\nFunctions to determine where to install and which shell config to modify.\n\n## Why\nInstall location and PATH handling varies by system and user preference.\n\n## get_install_dir()\n```bash\nget_install_dir() {\n    if [[ -n \"${DEST:-}\" ]]; then\n        echo \"$DEST\"\n    elif [[ \"${RU_SYSTEM:-}\" == \"1\" ]]; then\n        echo \"/usr/local/bin\"\n    else\n        echo \"${HOME}/.local/bin\"\n    fi\n}\n```\n\n## get_shell_config()\n```bash\nget_shell_config() {\n    local shell\n    shell=$(basename \"$SHELL\")\n    \n    case \"$shell\" in\n        zsh)  echo \"${HOME}/.zshrc\" ;;\n        bash)\n            if [[ -f \"${HOME}/.bashrc\" ]]; then\n                echo \"${HOME}/.bashrc\"\n            else\n                echo \"${HOME}/.bash_profile\"\n            fi\n            ;;\n        *)    echo \"${HOME}/.profile\" ;;\n    esac\n}\n```\n\n## Acceptance Criteria\n- Respects DEST override\n- Detects shell correctly\n- Uses appropriate config file","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["installer"],"dependencies":[{"issue_id":"bd-1204","depends_on_id":"bd-1201","type":"blocks","created_at":"2026-01-03T16:14:12.57179746-05:00","created_by":"daemon"}]}
{"id":"bd-1205","title":"Implement add_to_path()","description":"**Add installation directory to PATH**\n\n## What\nOffer to add the install directory to PATH if not already present.\n\n## Why\nUsers need ru in their PATH. We help with this but don't force it.\n\n## Implementation\n```bash\nadd_to_path() {\n    local install_dir=\"$1\"\n    local shell_config\n    shell_config=$(get_shell_config)\n    \n    # Check if already in PATH\n    if [[ \":$PATH:\" == *\":$install_dir:\"* ]]; then\n        return 0  # Already there\n    fi\n    \n    # Check if config already exports it\n    if grep -q \"export PATH=.*$install_dir\" \"$shell_config\" 2\u003e/dev/null; then\n        echo \"PATH export already in $shell_config\" \u003e\u00262\n        return 0\n    fi\n    \n    echo \"\" \u003e\u00262\n    echo \"$install_dir is not in your PATH.\" \u003e\u00262\n    echo \"Add this to $shell_config:\" \u003e\u00262\n    echo \"  export PATH=\\\"$install_dir:\\$PATH\\\"\" \u003e\u00262\n    echo \"\" \u003e\u00262\n    \n    # Non-interactive: just inform\n    if [[ ! -t 0 ]]; then\n        return 0\n    fi\n    \n    read -p \"Add it now? [y/N] \" response\n    if [[ \"${response,,}\" == \"y\" ]]; then\n        echo \"\" \u003e\u003e \"$shell_config\"\n        echo \"# Added by ru installer\" \u003e\u003e \"$shell_config\"\n        echo \"export PATH=\\\"$install_dir:\\$PATH\\\"\" \u003e\u003e \"$shell_config\"\n        echo \"Added to $shell_config. Restart your shell or run: source $shell_config\" \u003e\u00262\n    fi\n}\n```\n\n## Acceptance Criteria\n- Detects if already in PATH\n- Prompts interactively\n- Just informs in non-interactive mode\n- Idempotent (doesn't add twice)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["installer"],"dependencies":[{"issue_id":"bd-1205","depends_on_id":"bd-1204","type":"blocks","created_at":"2026-01-03T16:14:12.60493115-05:00","created_by":"daemon"}]}
{"id":"bd-1206","title":"Implement install.sh main()","description":"**Complete installation flow**\n\n## What\nThe main function that orchestrates the entire installation.\n\n## Why\nBrings all pieces together for a complete, working installer.\n\n## Flow\n1. Print banner\n2. Determine version (RU_VERSION or latest)\n3. Check for RU_UNSAFE_MAIN (warn loudly if set)\n4. Determine install directory\n5. Check if curl/wget available\n6. Download and verify\n7. Handle PATH\n8. Print success and next steps\n\n## Implementation Skeleton\n```bash\nmain() {\n    echo \"=================================\" \u003e\u00262\n    echo \"  ru installer\" \u003e\u00262\n    echo \"=================================\" \u003e\u00262\n    \n    local version=\"${RU_VERSION:-}\"\n    local install_dir\n    install_dir=$(get_install_dir)\n    \n    # Warning for unsafe mode\n    if [[ \"${RU_UNSAFE_MAIN:-}\" == \"1\" ]]; then\n        echo \"WARNING: Installing from main branch (unverified)\" \u003e\u00262\n        download_from_main \"$install_dir\"\n    else\n        if [[ -z \"$version\" ]]; then\n            version=$(get_latest_release)\n        fi\n        download_and_verify \"$version\" \"$install_dir\"\n    fi\n    \n    add_to_path \"$install_dir\"\n    \n    echo \"\" \u003e\u00262\n    echo \"Installation complete!\" \u003e\u00262\n    echo \"\" \u003e\u00262\n    echo \"Next steps:\" \u003e\u00262\n    echo \"  1. Run: ru init\" \u003e\u00262\n    echo \"  2. Add repos: ru add owner/repo\" \u003e\u00262\n    echo \"  3. Sync: ru sync\" \u003e\u00262\n}\n\nmain \"$@\"\n```\n\n## Acceptance Criteria\n- Complete working installer\n- Secure by default\n- Clear output\n- Helpful next steps","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["installer"],"dependencies":[{"issue_id":"bd-1206","depends_on_id":"bd-1202","type":"blocks","created_at":"2026-01-03T16:14:12.636366511-05:00","created_by":"daemon"},{"issue_id":"bd-1206","depends_on_id":"bd-1203","type":"blocks","created_at":"2026-01-03T16:14:12.667157086-05:00","created_by":"daemon"},{"issue_id":"bd-1206","depends_on_id":"bd-1205","type":"blocks","created_at":"2026-01-03T16:14:12.698424841-05:00","created_by":"daemon"}]}
{"id":"bd-13","title":"Phase 13: README \u0026 Documentation","description":"**EPIC: Comprehensive README Documentation**\n\n## Goal\nCreate thorough documentation in giil-style: beautiful, comprehensive, with examples for every use case.\n\n## Rationale\nDocumentation is marketing. A well-crafted README converts visitors into users. It should answer every question a potential user might have, with copy-pasteable examples.\n\n## README Sections\n- Hero banner with badges\n- Primary use case (the 'why')\n- Quickstart (under 30 seconds to first value)\n- All commands with examples\n- Configuration reference\n- Automation/CI guide with exit codes\n- Troubleshooting\n- Architecture overview\n- License\n\n## Examples Must Be Runnable\nEvery code block should be something a user can actually copy and run. No pseudocode, no placeholders without explanation.\n\n## Success Criteria\n- README covers all features\n- Quickstart actually works for new users\n- Examples are copy-paste ready","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["docs","readme"],"dependencies":[{"issue_id":"bd-13","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:08.511033657-05:00","created_by":"daemon"}]}
{"id":"bd-1301","title":"Create README.md header with badges","description":"**Create README header with project identity**\n\n## What\nCreate the README.md with hero section, badges, and brief description.\n\n## Why\nFirst impression matters. The header should immediately communicate what the tool is and its quality.\n\n## Badges to Include\n- CI status\n- Latest release version\n- License (MIT)\n- Shell (bash)\n\n## Content\n```markdown\n\u003cp align=\"center\"\u003e\n  \u003cimg src=\"https://img.shields.io/github/actions/workflow/status/Dicklesworthstone/repo_updater/ci.yml?label=CI\" /\u003e\n  \u003cimg src=\"https://img.shields.io/github/v/release/Dicklesworthstone/repo_updater\" /\u003e\n  \u003cimg src=\"https://img.shields.io/badge/license-MIT-blue.svg\" /\u003e\n  \u003cimg src=\"https://img.shields.io/badge/shell-bash-green.svg\" /\u003e\n\u003c/p\u003e\n\n\u003ch1 align=\"center\"\u003eru\u003c/h1\u003e\n\u003ch3 align=\"center\"\u003eRepo Updater\u003c/h3\u003e\n\n\u003cp align=\"center\"\u003e\n  \u003cstrong\u003eA beautiful, automation-friendly CLI for synchronizing GitHub repositories\u003c/strong\u003e\n\u003c/p\u003e\n```\n\n## Acceptance Criteria\n- Badges display correctly\n- Centered, professional look\n- Brief, accurate description","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["docs"],"dependencies":[{"issue_id":"bd-1301","depends_on_id":"bd-13","type":"blocks","created_at":"2026-01-03T16:14:12.730074625-05:00","created_by":"daemon"}]}
{"id":"bd-1302","title":"Write quickstart and commands sections","description":"**Document quickstart and all commands**\n\n## What\nWrite the quickstart guide and complete command reference.\n\n## Why\nUsers need to get started quickly and find reference documentation easily.\n\n## Quickstart Section\n```markdown\n## Quickstart\n\n# Install\ncurl -fsSL https://raw.githubusercontent.com/Dicklesworthstone/repo_updater/main/install.sh | bash\n\n# Initialize\nru init\n\n# Add repos\nru add owner/repo1\nru add owner/repo2 --private\n\n# Sync everything\nru sync\n```\n\n## Commands Section\n- Table of all commands with descriptions\n- Each command with full options\n- Real examples for each\n\n## Acceptance Criteria\n- 30-second quickstart works for new users\n- All commands documented\n- Examples are copy-paste ready","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["docs"],"dependencies":[{"issue_id":"bd-1302","depends_on_id":"bd-1301","type":"blocks","created_at":"2026-01-03T16:14:12.758079272-05:00","created_by":"daemon"},{"issue_id":"bd-1302","depends_on_id":"bd-1001","type":"blocks","created_at":"2026-01-03T16:14:12.787654137-05:00","created_by":"daemon"}]}
{"id":"bd-1303","title":"Write automation/CI section","description":"**Document CI/automation usage**\n\n## What\nExplain how to use ru in CI/CD pipelines and scripts.\n\n## Why\nAutomation is a key use case. Users need to know exit codes and non-interactive mode.\n\n## Content\n```markdown\n## Automation \u0026 CI\n\nru is designed for non-interactive use:\n\n# In CI/scripts:\nru sync --non-interactive --json\n\n# With environment auth:\nGH_TOKEN=xxx ru sync --non-interactive\n\n### Exit Codes\n\n| Code | Meaning |\n|------|-------------------------------------------|\n| 0 | All repos synced successfully |\n| 1 | Some repos failed (network, auth, etc.) |\n| 2 | Conflicts exist (diverged, dirty, etc.) |\n| 3 | Dependency error (gh missing, no auth) |\n| 4 | Invalid arguments |\n\n### GitHub Actions Example\n\njobs:\n  sync-repos:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: curl -fsSL .../install.sh | bash\n      - run: ru sync --non-interactive\n        env:\n          GH_TOKEN: ${{ secrets.GH_TOKEN }}\n```\n\n## Acceptance Criteria\n- Exit codes documented\n- GH_TOKEN pattern explained\n- GitHub Actions example works","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["docs"],"dependencies":[{"issue_id":"bd-1303","depends_on_id":"bd-1302","type":"blocks","created_at":"2026-01-03T16:14:12.818615174-05:00","created_by":"daemon"},{"issue_id":"bd-1303","depends_on_id":"bd-1105","type":"blocks","created_at":"2026-01-03T16:14:12.849991924-05:00","created_by":"daemon"}]}
{"id":"bd-1304","title":"Write troubleshooting and architecture sections","description":"**Document troubleshooting and architecture**\n\n## What\nCommon issues and solutions, plus architecture overview for contributors.\n\n## Why\nUsers need help when things go wrong. Contributors need to understand the codebase.\n\n## Troubleshooting\n- 'gh not found' - installation instructions\n- 'authentication required' - GH_TOKEN or gh auth login\n- 'diverged' - resolution commands\n- 'remote mismatch' - explanation and fix\n\n## Architecture\n- Script organization diagram\n- Configuration flow\n- Error handling philosophy (not set -e)\n- Stream separation explanation\n\n## Acceptance Criteria\n- Common issues covered\n- Clear resolution steps\n- Architecture understandable for contributors","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["docs"],"dependencies":[{"issue_id":"bd-1304","depends_on_id":"bd-1302","type":"blocks","created_at":"2026-01-03T16:14:12.880652474-05:00","created_by":"daemon"}]}
{"id":"bd-14","title":"Phase 14: CI/CD Workflows","description":"**EPIC: GitHub Actions CI/CD Workflows**\n\n## Goal\nImplement CI workflows for quality assurance and release automation.\n\n## Rationale\nAutomated testing catches issues before they reach users. ShellCheck finds common shell scripting errors. Behavioral tests verify actual functionality. Release automation ensures consistent, secure distribution.\n\n## CI Workflow (ci.yml)\n- ShellCheck on all .sh files\n- Bash syntax validation (bash -n)\n- Installation test on Ubuntu and macOS\n- URL parsing tests\n- Local git operation tests\n- JSON output validation\n- Version consistency check\n\n## Release Workflow (release.yml)\n- Triggered on version tags (v*)\n- Creates GitHub Release\n- Generates SHA256 checksums\n- Uploads ru and install.sh as release assets\n\n## Success Criteria\n- PRs are blocked on CI failure\n- Releases are automated and include checksums\n- Tests actually catch real bugs","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["ci","testing"],"dependencies":[{"issue_id":"bd-14","depends_on_id":"bd-1","type":"blocks","created_at":"2026-01-03T16:14:08.540476483-05:00","created_by":"daemon"},{"issue_id":"bd-14","depends_on_id":"bd-7","type":"blocks","created_at":"2026-01-03T16:14:08.569867903-05:00","created_by":"daemon"},{"issue_id":"bd-14","depends_on_id":"bd-8","type":"blocks","created_at":"2026-01-03T16:14:08.598982951-05:00","created_by":"daemon"}]}
{"id":"bd-1401","title":"Create .github/workflows/ci.yml","description":"**Create CI workflow for PRs and pushes**\n\n## What\nGitHub Actions workflow for continuous integration.\n\n## Why\nAutomated testing catches bugs before they reach users.\n\n## Jobs\n1. **shellcheck**: Lint all shell scripts\n2. **syntax-check**: Bash syntax validation\n3. **install-test**: Test installer on Ubuntu and macOS\n4. **behavioral-tests**: Run URL parsing and git operation tests\n5. **version-consistency**: Verify VERSION file matches script\n\n## Implementation\n```yaml\nname: CI\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  shellcheck:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: ludeeus/action-shellcheck@master\n        with:\n          severity: warning\n\n  syntax-check:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: bash -n ru\n      - run: bash -n install.sh\n\n  # ... more jobs\n```\n\n## Acceptance Criteria\n- All jobs run on PRs\n- ShellCheck catches issues\n- Tests actually test functionality","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["ci"],"dependencies":[{"issue_id":"bd-1401","depends_on_id":"bd-14","type":"blocks","created_at":"2026-01-03T16:14:12.910288124-05:00","created_by":"daemon"}]}
{"id":"bd-1402","title":"Create .github/workflows/release.yml","description":"**Create release workflow**\n\n## What\nGitHub Actions workflow for automated releases.\n\n## Why\nAutomated releases ensure consistent, secure distribution.\n\n## Trigger\nOn push of version tags: v*\n\n## Steps\n1. Validate tag matches VERSION file\n2. Create GitHub Release\n3. Generate SHA256 checksums\n4. Upload ru and install.sh as assets\n5. Upload checksums\n\n## Implementation\n```yaml\nname: Release\n\non:\n  push:\n    tags:\n      - 'v*'\n\njobs:\n  release:\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Verify version consistency\n        run: |\n          TAG_VERSION=\"${GITHUB_REF#refs/tags/v}\"\n          FILE_VERSION=$(cat VERSION)\n          if [[ \"$TAG_VERSION\" != \"$FILE_VERSION\" ]]; then\n            echo \"Version mismatch: tag=$TAG_VERSION file=$FILE_VERSION\"\n            exit 1\n          fi\n      \n      - name: Generate checksums\n        run: |\n          sha256sum ru \u003e ru.sha256\n          sha256sum install.sh \u003e install.sh.sha256\n      \n      - name: Create Release\n        uses: softprops/action-gh-release@v1\n        with:\n          files: |\n            ru\n            ru.sha256\n            install.sh\n            install.sh.sha256\n```\n\n## Acceptance Criteria\n- Releases created on tag push\n- Checksums included\n- Version consistency enforced","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["ci","release"],"dependencies":[{"issue_id":"bd-1402","depends_on_id":"bd-1401","type":"blocks","created_at":"2026-01-03T16:14:12.940855899-05:00","created_by":"daemon"}]}
{"id":"bd-1403","title":"Create scripts/test_parsing.sh","description":"**Implement URL parsing tests**\n\n## What\nTest script that validates URL parsing functions.\n\n## Why\nParsing is critical infrastructure. Bugs here break everything.\n\n## Test Structure\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\nSOURCE_DIR=\"$(dirname \"$0\")/..\"\nsource \"$SOURCE_DIR/ru\"\n\nFAILED=0\n\nassert_parses() {\n    local url=\"$1\" expected_host=\"$2\" expected_owner=\"$3\" expected_repo=\"$4\"\n    local host owner repo\n    \n    if parse_repo_url \"$url\" host owner repo; then\n        if [[ \"$host\" != \"$expected_host\" || \"$owner\" != \"$expected_owner\" || \"$repo\" != \"$expected_repo\" ]]; then\n            echo \"FAIL: $url parsed to $host/$owner/$repo (expected $expected_host/$expected_owner/$expected_repo)\"\n            ((FAILED++))\n        else\n            echo \"PASS: $url\"\n        fi\n    else\n        echo \"FAIL: $url failed to parse\"\n        ((FAILED++))\n    fi\n}\n\n# Test cases\nassert_parses \"https://github.com/owner/repo\" \"github.com\" \"owner\" \"repo\"\nassert_parses \"https://github.com/owner/repo.git\" \"github.com\" \"owner\" \"repo\"\nassert_parses \"git@github.com:owner/repo.git\" \"github.com\" \"owner\" \"repo\"\nassert_parses \"owner/repo\" \"github.com\" \"owner\" \"repo\"\n\nexit $FAILED\n```\n\n## Acceptance Criteria\n- All URL formats tested\n- Clear pass/fail output\n- Returns non-zero on any failure","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["testing"],"dependencies":[{"issue_id":"bd-1403","depends_on_id":"bd-706","type":"blocks","created_at":"2026-01-03T16:14:12.975042544-05:00","created_by":"daemon"}]}
{"id":"bd-1404","title":"Create scripts/test_local_git.sh","description":"**Implement local git operation tests**\n\n## What\nTest script that validates git operations without network.\n\n## Why\nGit operations must work correctly. Network-free tests are fast and reliable in CI.\n\n## Test Scenarios\n1. Status detection: current, behind, ahead, diverged\n2. Dirty detection\n3. Clone operation\n4. Pull operation\n5. Remote mismatch detection\n\n## Implementation\nCreate temporary git repos, simulate various states, verify detection.\n\n## Acceptance Criteria\n- All status types tested\n- Works without network\n- Cleans up after itself","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["testing"],"dependencies":[{"issue_id":"bd-1404","depends_on_id":"bd-808","type":"blocks","created_at":"2026-01-03T16:14:13.005730076-05:00","created_by":"daemon"}]}
{"id":"bd-15","title":"Phase 15: Testing \u0026 Polish","description":"**EPIC: Final Testing \u0026 Quality Polish**\n\n## Goal\nComprehensive end-to-end testing and final polish before v1.0.0 release.\n\n## Rationale\nIndividual components may work but integration can still fail. This phase verifies the complete user journey: installation, first run, configuration, sync, error recovery.\n\n## Test Scenarios\n- Fresh install on clean system\n- gh CLI detection and auth flow\n- First run with no config (should trigger init)\n- Sync with public repos (no auth needed)\n- Sync with private repos (auth required)\n- Handling of dirty repos, diverged repos\n- Non-interactive mode in CI\n- JSON output parsing with jq\n\n## Polish Items\n- Consistent terminology throughout\n- Error messages are actionable\n- Help text is accurate and complete\n- No ShellCheck warnings at severity warning+\n\n## Success Criteria\n- All test scenarios pass\n- Real user can install and use without reading source code\n- Tool feels professional and trustworthy","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["polish","testing"],"dependencies":[{"issue_id":"bd-15","depends_on_id":"bd-10","type":"blocks","created_at":"2026-01-03T16:14:08.627181743-05:00","created_by":"daemon"},{"issue_id":"bd-15","depends_on_id":"bd-12","type":"blocks","created_at":"2026-01-03T16:14:08.655784427-05:00","created_by":"daemon"},{"issue_id":"bd-15","depends_on_id":"bd-13","type":"blocks","created_at":"2026-01-03T16:14:08.685174964-05:00","created_by":"daemon"},{"issue_id":"bd-15","depends_on_id":"bd-14","type":"blocks","created_at":"2026-01-03T16:14:08.713971583-05:00","created_by":"daemon"}]}
{"id":"bd-1501","title":"Test fresh installation on clean system","description":"**End-to-end installation test**\n\n## What\nTest the complete installation flow on a clean system.\n\n## Why\nThe installer is users' first experience. It must work flawlessly.\n\n## Test Steps\n1. Start with fresh system (Docker or VM)\n2. Run curl-bash installer\n3. Verify ru is installed and executable\n4. Verify --help works\n5. Verify --version matches expected\n\n## Environment\nTest on:\n- Ubuntu latest\n- macOS latest\n\n## Acceptance Criteria\n- Installer works on clean systems\n- ru is in PATH or instructions provided\n- No errors during install","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["e2e","testing"],"dependencies":[{"issue_id":"bd-1501","depends_on_id":"bd-15","type":"blocks","created_at":"2026-01-03T16:14:13.037444482-05:00","created_by":"daemon"},{"issue_id":"bd-1501","depends_on_id":"bd-1206","type":"blocks","created_at":"2026-01-03T16:14:13.069064851-05:00","created_by":"daemon"}]}
{"id":"bd-1502","title":"Test gh CLI detection and auth flow","description":"**Test dependency detection flow**\n\n## What\nVerify the gh detection and authentication flow works correctly.\n\n## Test Scenarios\n1. gh not installed: helpful error message\n2. gh installed but not authed: prompt for auth\n3. gh installed and authed: proceed normally\n4. Non-interactive with GH_TOKEN: works\n5. Non-interactive without GH_TOKEN: fails cleanly\n\n## Acceptance Criteria\n- All scenarios handled gracefully\n- No hangs in non-interactive mode\n- Clear, actionable messages","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["e2e","testing"],"dependencies":[{"issue_id":"bd-1502","depends_on_id":"bd-15","type":"blocks","created_at":"2026-01-03T16:14:13.099831922-05:00","created_by":"daemon"},{"issue_id":"bd-1502","depends_on_id":"bd-606","type":"blocks","created_at":"2026-01-03T16:14:13.129113384-05:00","created_by":"daemon"}]}
{"id":"bd-1503","title":"Test first run and init flow","description":"**Test first-time user experience**\n\n## What\nVerify the first run experience is smooth.\n\n## Test Scenarios\n1. Fresh install, no config: ru prompts for init\n2. ru init creates all necessary files\n3. After init, ru sync works (with empty list)\n4. ru add works\n5. Second ru init is idempotent\n\n## Acceptance Criteria\n- First run is intuitive\n- Config files created correctly\n- No errors for new users","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["e2e","testing"],"dependencies":[{"issue_id":"bd-1503","depends_on_id":"bd-15","type":"blocks","created_at":"2026-01-03T16:14:13.159552929-05:00","created_by":"daemon"},{"issue_id":"bd-1503","depends_on_id":"bd-306","type":"blocks","created_at":"2026-01-03T16:14:13.189712034-05:00","created_by":"daemon"}]}
{"id":"bd-1504","title":"Test sync with real repos","description":"**Test sync against real GitHub repos**\n\n## What\nTest sync functionality with real public repositories.\n\n## Test Steps\n1. Add a few public repos (charmbracelet/gum, cli/cli)\n2. Run ru sync\n3. Verify repos are cloned\n4. Run ru sync again\n5. Verify repos show as 'current'\n6. Manually modify a repo\n7. Run ru sync\n8. Verify dirty detection or appropriate handling\n\n## Note\nThis test requires network. May not run in all CI environments.\n\n## Acceptance Criteria\n- Clone works for public repos\n- Pull works for existing repos\n- Status detection is accurate","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["e2e","testing"],"dependencies":[{"issue_id":"bd-1504","depends_on_id":"bd-15","type":"blocks","created_at":"2026-01-03T16:14:13.221459343-05:00","created_by":"daemon"},{"issue_id":"bd-1504","depends_on_id":"bd-1001","type":"blocks","created_at":"2026-01-03T16:14:13.250911827-05:00","created_by":"daemon"}]}
{"id":"bd-1505","title":"Final ShellCheck and polish pass","description":"**Final quality pass before release**\n\n## What\nRun ShellCheck, fix all warnings, verify consistency.\n\n## Checks\n1. ShellCheck with severity warning: 0 warnings\n2. All help text matches actual behavior\n3. All error messages are actionable\n4. Terminology is consistent\n5. No debug output left in\n6. VERSION file matches script\n\n## Polish Items\n- Remove any TODO comments\n- Verify all functions are documented\n- Check for unused functions\n- Verify exit codes are consistent\n\n## Acceptance Criteria\n- ShellCheck clean\n- Ready for v1.0.0 release\n- Professional quality","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["polish","testing"],"dependencies":[{"issue_id":"bd-1505","depends_on_id":"bd-1501","type":"blocks","created_at":"2026-01-03T16:14:13.281033562-05:00","created_by":"daemon"},{"issue_id":"bd-1505","depends_on_id":"bd-1502","type":"blocks","created_at":"2026-01-03T16:14:13.312018494-05:00","created_by":"daemon"},{"issue_id":"bd-1505","depends_on_id":"bd-1503","type":"blocks","created_at":"2026-01-03T16:14:13.341751347-05:00","created_by":"daemon"},{"issue_id":"bd-1505","depends_on_id":"bd-1504","type":"blocks","created_at":"2026-01-03T16:14:13.371996395-05:00","created_by":"daemon"}]}
{"id":"bd-1my","title":"Test with dep","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T16:11:56.059825111-05:00","updated_at":"2026-01-03T16:15:28.250264988-05:00","closed_at":"2026-01-03T16:15:28.250264988-05:00","close_reason":"Test issue - removing","dependencies":[{"issue_id":"bd-1my","depends_on_id":"bd-1","type":"blocks","created_at":"2026-01-03T16:11:56.08546967-05:00","created_by":"daemon"}]}
{"id":"bd-2","title":"Phase 2: Core Script Skeleton","description":"**EPIC: Main Script Architecture \u0026 Entry Point**\n\n## Goal\nCreate the ru script skeleton with proper shell conventions, argument parsing, subcommand dispatch, and the foundational patterns that all features will build upon.\n\n## Rationale\nThe architecture decisions made here ripple through the entire codebase. Getting the error handling pattern right (NOT using set -e globally), establishing stream separation (stderr for humans, stdout for data), and setting up proper exit traps prevents countless bugs later.\n\n## Critical Patterns\n- `set -uo pipefail` but NOT `set -e` - we handle errors explicitly\n- EXIT trap for cleanup and guaranteed summary output\n- Subcommand dispatch pattern allows future extensibility\n- Global state variables clearly defined at top\n\n## Why Not set -e?\nThe `set -e` trap is subtle: `output=$(failing_cmd); exit_code=$?` exits before capturing the exit code. We need repos to continue processing even when one fails, so explicit error handling is mandatory.\n\n## Success Criteria\n- Script runs without syntax errors\n- `ru --help` and `ru --version` work\n- Subcommand routing works (even if subcommands are stubs)\n- EXIT trap fires and cleans up temp files","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:16:38.688364552-05:00","closed_at":"2026-01-03T16:16:38.688364552-05:00","close_reason":"Phase 2 epic - starting core script skeleton implementation","labels":["architecture","core"],"dependencies":[{"issue_id":"bd-2","depends_on_id":"bd-1","type":"blocks","created_at":"2026-01-03T16:12:12.031401748-05:00","created_by":"daemon"}]}
{"id":"bd-201","title":"Create ru script with shebang and header","description":"**Create ru script with proper shell header**\n\n## What\nCreate the ru script file with shebang, metadata header, and `set -uo pipefail`.\n\n## Why\nThe header establishes the contract: what this script is, what it does, how to use it. The shebang ensures correct interpreter. `set -uo pipefail` catches common errors without the pitfalls of `set -e`.\n\n## Critical: NOT set -e\nWe explicitly avoid `set -e` because:\n- `output=$(failing_cmd); exit_code=$?` exits before capturing exit code\n- We need processing to continue after individual repo failures\n- Explicit error handling is more predictable\n\n## Header Content\n- Script name and purpose\n- Feature list\n- Usage synopsis\n- Command overview\n- Global options\n\n## Acceptance Criteria\n- ru file exists with executable permission\n- Shebang is `#!/usr/bin/env bash`\n- Header documents all commands and options\n- `set -uo pipefail` is present, `set -e` is NOT","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:26.311917815-05:00","closed_at":"2026-01-03T16:18:26.311917815-05:00","close_reason":"Implemented in initial ru script skeleton","labels":["core"],"dependencies":[{"issue_id":"bd-201","depends_on_id":"bd-2","type":"blocks","created_at":"2026-01-03T16:14:08.916838124-05:00","created_by":"daemon"},{"issue_id":"bd-201","depends_on_id":"bd-101","type":"blocks","created_at":"2026-01-03T16:14:08.945661914-05:00","created_by":"daemon"}]}
{"id":"bd-202","title":"Add VERSION and XDG path constants","description":"**Define VERSION and XDG-compliant path constants**\n\n## What\nAdd constants for VERSION (read from file), repository info, and XDG paths.\n\n## Why\nCentralized constants prevent magic strings scattered through code. XDG paths ensure we respect system conventions.\n\n## Constants Needed\n```bash\nVERSION=\"1.0.0\"\nREPO_OWNER=\"Dicklesworthstone\"\nREPO_NAME=\"repo_updater\"\n\nXDG_CONFIG_HOME=\"${XDG_CONFIG_HOME:-$HOME/.config}\"\nXDG_DATA_HOME=\"${XDG_DATA_HOME:-$HOME/.local/share}\"\nXDG_CACHE_HOME=\"${XDG_CACHE_HOME:-$HOME/.cache}\"\nXDG_STATE_HOME=\"${XDG_STATE_HOME:-$HOME/.local/state}\"\n\nRU_CONFIG_DIR=\"${RU_CONFIG_DIR:-$XDG_CONFIG_HOME/ru}\"\nRU_DATA_DIR=\"${RU_DATA_DIR:-$XDG_DATA_HOME/ru}\"\nRU_CACHE_DIR=\"${RU_CACHE_DIR:-$XDG_CACHE_HOME/ru}\"\nRU_STATE_DIR=\"${RU_STATE_DIR:-$XDG_STATE_HOME/ru}\"\nRU_LOG_DIR=\"${RU_LOG_DIR:-$RU_STATE_DIR/logs}\"\n```\n\n## Acceptance Criteria\n- All XDG paths defined with proper defaults\n- All paths can be overridden via environment\n- VERSION matches VERSION file","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:26.314139439-05:00","closed_at":"2026-01-03T16:18:26.314139439-05:00","close_reason":"Implemented in initial ru script skeleton","labels":["config","core"],"dependencies":[{"issue_id":"bd-202","depends_on_id":"bd-201","type":"blocks","created_at":"2026-01-03T16:14:08.974885908-05:00","created_by":"daemon"}]}
{"id":"bd-203","title":"Add default configuration constants","description":"**Define default configuration values**\n\n## What\nAdd constants for default PROJECTS_DIR, LAYOUT, UPDATE_STRATEGY, etc.\n\n## Why\nDefaults should be centralized and documented. Users who don't configure anything get sensible behavior.\n\n## Defaults\n```bash\nDEFAULT_PROJECTS_DIR=\"/data/projects\"\nDEFAULT_LAYOUT=\"flat\"  # flat | owner-repo | full\nDEFAULT_UPDATE_STRATEGY=\"ff-only\"  # ff-only | rebase | merge\n```\n\n## Layout Rationale\n- flat: Simple, matches existing /data/projects structure\n- owner-repo: Avoids collisions between owner1/repo and owner2/repo\n- full: Multi-host ready (github.com/owner/repo)\n\n## Strategy Rationale\n- ff-only: Safe default, fails on divergence rather than creating merge commits\n- rebase: Cleaner history but rewrites commits\n- merge: Traditional but creates merge commits\n\n## Acceptance Criteria\n- All defaults documented with rationale\n- Defaults are conservative (ff-only, flat)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:26.315843549-05:00","closed_at":"2026-01-03T16:18:26.315843549-05:00","close_reason":"Implemented in initial ru script skeleton","labels":["config","core"],"dependencies":[{"issue_id":"bd-203","depends_on_id":"bd-202","type":"blocks","created_at":"2026-01-03T16:14:09.006997532-05:00","created_by":"daemon"}]}
{"id":"bd-204","title":"Add ANSI color definitions","description":"**Define ANSI escape codes for colored output**\n\n## What\nDefine color constants for terminal output when gum is unavailable.\n\n## Why\nColors improve readability: red for errors, yellow for warnings, green for success. These are fallbacks when gum isn't installed.\n\n## Colors Needed\n```bash\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nBLUE='\\033[0;34m'\nCYAN='\\033[0;36m'\nMAGENTA='\\033[0;35m'\nBOLD='\\033[1m'\nDIM='\\033[2m'\nNC='\\033[0m'  # No Color (reset)\n```\n\n## Usage Pattern\n```bash\necho -e \"${RED}Error:${NC} Something failed\"\n```\n\n## Acceptance Criteria\n- All standard colors defined\n- NC (reset) defined for clean termination\n- Colors work in common terminals","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:26.317997646-05:00","closed_at":"2026-01-03T16:18:26.317997646-05:00","close_reason":"Implemented in initial ru script skeleton","labels":["core","ui"],"dependencies":[{"issue_id":"bd-204","depends_on_id":"bd-201","type":"blocks","created_at":"2026-01-03T16:14:09.03638837-05:00","created_by":"daemon"}]}
{"id":"bd-205","title":"Add runtime state variables","description":"**Define runtime state variables**\n\n## What\nDefine variables that track runtime state: GUM_AVAILABLE, INTERACTIVE mode, output modes.\n\n## Why\nRuntime state needs clear, centralized management. These flags control behavior throughout the script.\n\n## Variables\n```bash\nGUM_AVAILABLE=false\nINTERACTIVE=true\nJSON_MODE=false\nQUIET_MODE=false\nVERBOSE_MODE=false\nDRY_RUN=false\n\nRESULTS_FILE=\"\"  # Temp file for NDJSON results\nRUN_START_TIME=\"\"\n```\n\n## Flag Meanings\n- GUM_AVAILABLE: Set true if gum binary found\n- INTERACTIVE: Set false with --non-interactive or when not a TTY\n- JSON_MODE: Set true with --json\n- QUIET_MODE: Set true with -q/--quiet\n- VERBOSE_MODE: Set true with --verbose\n- DRY_RUN: Set true with --dry-run\n\n## Acceptance Criteria\n- All flags initialized to sensible defaults\n- Meanings documented","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:26.320177062-05:00","closed_at":"2026-01-03T16:18:26.320177062-05:00","close_reason":"Implemented in initial ru script skeleton","labels":["core"],"dependencies":[{"issue_id":"bd-205","depends_on_id":"bd-201","type":"blocks","created_at":"2026-01-03T16:14:09.066325117-05:00","created_by":"daemon"}]}
{"id":"bd-206","title":"Create RESULTS_FILE temp file and EXIT trap","description":"**Set up temp file management and EXIT trap**\n\n## What\nCreate a temp file for NDJSON results and ensure cleanup via EXIT trap.\n\n## Why\nWe accumulate results during processing, then aggregate for the summary. Temp files must be cleaned up even on error/interrupt.\n\n## Implementation\n```bash\nRESULTS_FILE=$(mktemp)\nRUN_START_TIME=$(date +%s)\n\non_exit() {\n    local exit_code=$?\n    # Print summary even on error\n    if [[ -n \"$RESULTS_FILE\" \u0026\u0026 -f \"$RESULTS_FILE\" ]]; then\n        if [[ \"$JSON_MODE\" == \"true\" ]]; then\n            generate_json_report\n        else\n            print_summary\n        fi\n    fi\n    # Cleanup\n    [[ -n \"$RESULTS_FILE\" ]] \u0026\u0026 rm -f \"$RESULTS_FILE\"\n    exit $exit_code\n}\n\ntrap on_exit EXIT\ntrap 'exit 130' INT TERM\n```\n\n## Acceptance Criteria\n- Temp file created at script start\n- EXIT trap always fires (normal exit, error, interrupt)\n- Temp file is cleaned up\n- Summary is printed even on error","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:26.322098701-05:00","closed_at":"2026-01-03T16:18:26.322098701-05:00","close_reason":"Implemented in initial ru script skeleton","labels":["core","safety"],"dependencies":[{"issue_id":"bd-206","depends_on_id":"bd-205","type":"blocks","created_at":"2026-01-03T16:14:09.098236334-05:00","created_by":"daemon"}]}
{"id":"bd-207","title":"Implement is_interactive() and can_prompt()","description":"**Implement TTY detection functions**\n\n## What\nCreate functions to detect if we're in an interactive terminal and can prompt.\n\n## Why\nPrompting in non-interactive mode (CI, pipes) causes hangs. We must detect and handle this.\n\n## Implementation\n```bash\nis_interactive() {\n    [[ -t 0 \u0026\u0026 -t 1 ]]  # stdin and stdout are TTYs\n}\n\ncan_prompt() {\n    [[ \"$INTERACTIVE\" == \"true\" ]] \u0026\u0026 is_interactive \u0026\u0026 [[ -z \"${CI:-}\" ]]\n}\n```\n\n## Logic\n- is_interactive: True if stdin AND stdout are TTYs\n- can_prompt: True if interactive mode AND is_interactive AND not in CI\n\n## Acceptance Criteria\n- Works correctly in terminal\n- Returns false when piped\n- Respects $CI environment variable","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:26.323713513-05:00","closed_at":"2026-01-03T16:18:26.323713513-05:00","close_reason":"Implemented in initial ru script skeleton","labels":["core"],"dependencies":[{"issue_id":"bd-207","depends_on_id":"bd-205","type":"blocks","created_at":"2026-01-03T16:14:09.127124475-05:00","created_by":"daemon"}]}
{"id":"bd-208","title":"Implement show_help() and show_version()","description":"**Implement help and version display**\n\n## What\nCreate functions to display help text and version information.\n\n## Why\nEvery CLI tool needs --help and --version. These are the first things users try.\n\n## show_help() Content\n- Usage synopsis\n- All commands with brief descriptions\n- Global options\n- Examples\n- Where to get more help\n\n## show_version() Content\n- Tool name and version\n- Brief description\n- Repository URL\n\n## Output Target\nHelp goes to stderr (so `ru --help | less` works correctly with stdout).\n\n## Acceptance Criteria\n- --help shows comprehensive help\n- --version shows version\n- Help is readable and accurate","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:26.32553849-05:00","closed_at":"2026-01-03T16:18:26.32553849-05:00","close_reason":"Implemented in initial ru script skeleton","labels":["cli","core"],"dependencies":[{"issue_id":"bd-208","depends_on_id":"bd-201","type":"blocks","created_at":"2026-01-03T16:14:09.155722159-05:00","created_by":"daemon"},{"issue_id":"bd-208","depends_on_id":"bd-202","type":"blocks","created_at":"2026-01-03T16:14:09.183196406-05:00","created_by":"daemon"}]}
{"id":"bd-209","title":"Implement dispatch_command()","description":"**Implement subcommand routing**\n\n## What\nCreate the command dispatcher that routes to appropriate subcommand functions.\n\n## Why\nSubcommand architecture provides clean separation. The dispatcher is the central router.\n\n## Implementation\n```bash\ndispatch_command() {\n    local cmd=\"${1:-sync}\"  # Default to sync\n    shift || true\n\n    case \"$cmd\" in\n        sync)       cmd_sync \"$@\" ;;\n        status)     cmd_status \"$@\" ;;\n        init)       cmd_init \"$@\" ;;\n        add)        cmd_add \"$@\" ;;\n        list)       cmd_list \"$@\" ;;\n        doctor)     cmd_doctor \"$@\" ;;\n        self-update) cmd_self_update \"$@\" ;;\n        config)     cmd_config \"$@\" ;;\n        -h|--help)  show_help ;;\n        -v|--version) show_version ;;\n        *)\n            # Maybe it's a file/URL passed directly\n            if [[ -f \"$cmd\" || \"$cmd\" =~ ^https?:// ]]; then\n                cmd_sync \"$cmd\" \"$@\"\n            else\n                log_error \"Unknown command: $cmd\"\n                exit 4\n            fi\n            ;;\n    esac\n}\n```\n\n## Acceptance Criteria\n- All commands route correctly\n- Default command is sync\n- Unknown commands error with exit code 4\n- Files/URLs passed directly trigger sync","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:26.327002117-05:00","closed_at":"2026-01-03T16:18:26.327002117-05:00","close_reason":"Implemented in initial ru script skeleton","labels":["cli","core"],"dependencies":[{"issue_id":"bd-209","depends_on_id":"bd-208","type":"blocks","created_at":"2026-01-03T16:14:09.212452531-05:00","created_by":"daemon"}]}
{"id":"bd-210","title":"Implement parse_global_args() and main()","description":"**Implement argument parsing and main entry point**\n\n## What\nParse global arguments (--json, --quiet, etc.) and create the main() entry point.\n\n## Why\nGlobal options apply to all commands and must be parsed before dispatch.\n\n## Global Options\n- --help, -h: Show help\n- --version, -v: Show version\n- --json: JSON output mode\n- --quiet, -q: Minimal output\n- --verbose: Detailed output\n- --non-interactive: Never prompt\n- --dry-run: Show what would happen\n\n## Implementation Pattern\n```bash\nmain() {\n    # Parse global args first\n    while [[ $# -gt 0 ]]; do\n        case \"$1\" in\n            --json) JSON_MODE=true; shift ;;\n            --quiet|-q) QUIET_MODE=true; shift ;;\n            --verbose) VERBOSE_MODE=true; shift ;;\n            --non-interactive) INTERACTIVE=false; shift ;;\n            --dry-run) DRY_RUN=true; shift ;;\n            --) shift; break ;;\n            -*) break ;;  # Let dispatch handle unknown flags\n            *) break ;;\n        esac\n    done\n    \n    # Check gum availability\n    check_gum\n    \n    # Dispatch to subcommand\n    dispatch_command \"$@\"\n}\n\nmain \"$@\"\n```\n\n## Acceptance Criteria\n- Global args parsed before dispatch\n- Flags correctly set runtime state\n- Unknown args passed to subcommands\n- Script runs when executed directly","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:26.328450456-05:00","closed_at":"2026-01-03T16:18:26.328450456-05:00","close_reason":"Implemented in initial ru script skeleton","labels":["cli","core"],"dependencies":[{"issue_id":"bd-210","depends_on_id":"bd-209","type":"blocks","created_at":"2026-01-03T16:14:09.241926646-05:00","created_by":"daemon"}]}
{"id":"bd-3","title":"Phase 3: Configuration System","description":"**EPIC: XDG-Compliant Configuration System**\n\n## Goal\nImplement a configuration system that follows XDG Base Directory Specification, allowing users to customize behavior while providing sensible defaults.\n\n## Rationale\nThe original plan had a critical flaw: default lists pointing to repo-local files that won't exist after installation. XDG compliance solves this elegantly - config lives in ~/.config/ru/, data in ~/.local/share/ru/, cache in ~/.cache/ru/, and state in ~/.local/state/ru/.\n\n## Configuration Resolution Order\n1. Command-line arguments (--dir, --layout)\n2. Environment variables (RU_PROJECTS_DIR, RU_LAYOUT)\n3. Config file (~/.config/ru/config)\n4. Built-in defaults\n\nThis order is critical: CLI always wins, then env (for CI), then file (for user prefs), then defaults.\n\n## Key Config Values\n- PROJECTS_DIR: Where repos live (default: /data/projects)\n- LAYOUT: flat|owner-repo|full (default: flat for backwards compat)\n- UPDATE_STRATEGY: ff-only|rebase|merge (default: ff-only for safety)\n- AUTOSTASH: Whether to auto-stash before pull (default: false)\n\n## Success Criteria\n- `ru init` creates config directory and files\n- Config values resolve correctly through the priority chain\n- User can override any value via CLI, env, or file","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["config","xdg"],"dependencies":[{"issue_id":"bd-3","depends_on_id":"bd-2","type":"blocks","created_at":"2026-01-03T16:13:08.982275423-05:00","created_by":"daemon"}]}
{"id":"bd-301","title":"Implement ensure_dir() utility","description":"**Create directory creation utility**\n\n## What\nA utility function that creates directories if they don't exist.\n\n## Why\nWe create many directories (config, logs, cache). A utility centralizes this with consistent error handling.\n\n## Implementation\n```bash\nensure_dir() {\n    local dir=\"$1\"\n    if [[ ! -d \"$dir\" ]]; then\n        mkdir -p \"$dir\" || {\n            log_error \"Failed to create directory: $dir\"\n            return 1\n        }\n    fi\n}\n```\n\n## Acceptance Criteria\n- Creates directory if missing\n- No-op if exists\n- Returns error on failure","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["config","util"],"dependencies":[{"issue_id":"bd-301","depends_on_id":"bd-3","type":"blocks","created_at":"2026-01-03T16:14:09.271271838-05:00","created_by":"daemon"},{"issue_id":"bd-301","depends_on_id":"bd-201","type":"blocks","created_at":"2026-01-03T16:14:09.299448879-05:00","created_by":"daemon"}]}
{"id":"bd-302","title":"Implement get_config_value()","description":"**Read configuration values from config file**\n\n## What\nFunction to read a key-value pair from the config file.\n\n## Why\nConfig file is simple KEY=VALUE format. We need reliable parsing.\n\n## Implementation\n```bash\nget_config_value() {\n    local key=\"$1\"\n    local default=\"${2:-}\"\n    local config_file=\"$RU_CONFIG_DIR/config\"\n    \n    if [[ -f \"$config_file\" ]]; then\n        local value\n        value=$(grep -E \"^${key}=\" \"$config_file\" 2\u003e/dev/null | cut -d'=' -f2- | head -1)\n        if [[ -n \"$value\" ]]; then\n            echo \"$value\"\n            return 0\n        fi\n    fi\n    echo \"$default\"\n}\n```\n\n## Config File Format\n```bash\n# Comment lines start with #\nPROJECTS_DIR=/data/projects\nLAYOUT=flat\nUPDATE_STRATEGY=ff-only\n```\n\n## Acceptance Criteria\n- Reads values correctly\n- Returns default if key missing\n- Handles missing config file\n- Ignores comments","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["config"],"dependencies":[{"issue_id":"bd-302","depends_on_id":"bd-301","type":"blocks","created_at":"2026-01-03T16:14:09.330042474-05:00","created_by":"daemon"}]}
{"id":"bd-303","title":"Implement set_config_value()","description":"**Write configuration values to config file**\n\n## What\nFunction to set a key-value pair in the config file.\n\n## Why\nUsers need to change config via `ru config --set KEY=VALUE`.\n\n## Implementation\n```bash\nset_config_value() {\n    local key=\"$1\"\n    local value=\"$2\"\n    local config_file=\"$RU_CONFIG_DIR/config\"\n    \n    ensure_dir \"$RU_CONFIG_DIR\"\n    \n    if [[ -f \"$config_file\" ]] \u0026\u0026 grep -qE \"^${key}=\" \"$config_file\"; then\n        # Update existing\n        sed -i \"s|^${key}=.*|${key}=${value}|\" \"$config_file\"\n    else\n        # Append new\n        echo \"${key}=${value}\" \u003e\u003e \"$config_file\"\n    fi\n}\n```\n\n## Acceptance Criteria\n- Creates config file if missing\n- Updates existing keys\n- Appends new keys\n- Preserves other content","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["config"],"dependencies":[{"issue_id":"bd-303","depends_on_id":"bd-302","type":"blocks","created_at":"2026-01-03T16:14:09.35877973-05:00","created_by":"daemon"}]}
{"id":"bd-304","title":"Implement resolve_config()","description":"**Resolve configuration with priority chain**\n\n## What\nFunction that resolves config values through CLI \u003e env \u003e file \u003e default priority.\n\n## Why\nUsers can override config at multiple levels. The resolution order must be consistent and predictable.\n\n## Priority Order\n1. Command-line arguments (highest)\n2. Environment variables (RU_PROJECTS_DIR, etc.)\n3. Config file (~/.config/ru/config)\n4. Built-in defaults (lowest)\n\n## Implementation\n```bash\nresolve_config() {\n    # PROJECTS_DIR: CLI \u003e env \u003e file \u003e default\n    PROJECTS_DIR=\"${CLI_PROJECTS_DIR:-${RU_PROJECTS_DIR:-$(get_config_value PROJECTS_DIR \"$DEFAULT_PROJECTS_DIR\")}}\"\n    \n    # LAYOUT: CLI \u003e env \u003e file \u003e default\n    LAYOUT=\"${CLI_LAYOUT:-${RU_LAYOUT:-$(get_config_value LAYOUT \"$DEFAULT_LAYOUT\")}}\"\n    \n    # UPDATE_STRATEGY: CLI \u003e env \u003e file \u003e default\n    UPDATE_STRATEGY=\"${CLI_UPDATE_STRATEGY:-${RU_UPDATE_STRATEGY:-$(get_config_value UPDATE_STRATEGY \"$DEFAULT_UPDATE_STRATEGY\")}}\"\n    \n    # ... etc for other config values\n}\n```\n\n## Acceptance Criteria\n- CLI always wins\n- Env overrides file\n- File overrides default\n- All values resolve to something","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["config"],"dependencies":[{"issue_id":"bd-304","depends_on_id":"bd-302","type":"blocks","created_at":"2026-01-03T16:14:09.388094555-05:00","created_by":"daemon"},{"issue_id":"bd-304","depends_on_id":"bd-203","type":"blocks","created_at":"2026-01-03T16:14:09.417233259-05:00","created_by":"daemon"}]}
{"id":"bd-305","title":"Implement ensure_config_exists()","description":"**Create default config on first run**\n\n## What\nFunction that creates config directory and default files if they don't exist.\n\n## Why\nFirst-run experience must be smooth. Users shouldn't have to manually create config files.\n\n## What Gets Created\n- ~/.config/ru/config (with commented defaults)\n- ~/.config/ru/repos.d/public.txt (empty with header comment)\n- ~/.config/ru/repos.d/private.txt (empty with header comment)\n\n## Implementation\n```bash\nensure_config_exists() {\n    ensure_dir \"$RU_CONFIG_DIR\"\n    ensure_dir \"$RU_CONFIG_DIR/repos.d\"\n    \n    if [[ ! -f \"$RU_CONFIG_DIR/config\" ]]; then\n        cat \u003e \"$RU_CONFIG_DIR/config\" \u003c\u003c 'EOF'\n# ru configuration\n# See: ru config --help\n\n# PROJECTS_DIR=/data/projects\n# LAYOUT=flat\n# UPDATE_STRATEGY=ff-only\nEOF\n    fi\n    \n    # Similar for repos.d files...\n}\n```\n\n## Acceptance Criteria\n- Creates directories if missing\n- Creates config file with documented defaults\n- Creates empty list files with headers\n- Idempotent (safe to call multiple times)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["config"],"dependencies":[{"issue_id":"bd-305","depends_on_id":"bd-301","type":"blocks","created_at":"2026-01-03T16:14:09.446161756-05:00","created_by":"daemon"},{"issue_id":"bd-305","depends_on_id":"bd-303","type":"blocks","created_at":"2026-01-03T16:14:09.47427157-05:00","created_by":"daemon"}]}
{"id":"bd-306","title":"Implement cmd_init()","description":"**Implement init subcommand**\n\n## What\nThe `ru init` command that sets up configuration for first-time users.\n\n## Why\nExplicit initialization gives users a clear starting point and chance to customize.\n\n## Behavior\n1. Create config directories\n2. Create default config files\n3. Optionally copy example repos (--example flag)\n4. Print next steps\n\n## Options\n- --example: Include example repos from examples/public.txt\n\n## Output\n```\n Created ~/.config/ru/config\n Created ~/.config/ru/repos.d/public.txt\n Created ~/.config/ru/repos.d/private.txt\n\nNext steps:\n  1. Add repos: ru add owner/repo\n  2. Sync:      ru sync\n```\n\n## Acceptance Criteria\n- Creates all necessary files\n- --example copies examples\n- Prints helpful next steps\n- Idempotent (can run multiple times)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands","config"],"dependencies":[{"issue_id":"bd-306","depends_on_id":"bd-305","type":"blocks","created_at":"2026-01-03T16:14:09.503104948-05:00","created_by":"daemon"}]}
{"id":"bd-307","title":"Implement cmd_config()","description":"**Implement config subcommand**\n\n## What\nThe `ru config` command to view and modify configuration.\n\n## Why\nUsers need to inspect and change config without editing files manually.\n\n## Subcommand Modes\n- `ru config` or `ru config --print`: Show all resolved config\n- `ru config KEY`: Show specific value\n- `ru config --set KEY=VALUE`: Set a value\n\n## Output Format (--print)\n```\nConfiguration (resolved):\n  PROJECTS_DIR=/data/projects  (from: file)\n  LAYOUT=flat                  (from: default)\n  UPDATE_STRATEGY=ff-only      (from: env)\n```\n\nShowing the source helps users understand where values come from.\n\n## Acceptance Criteria\n- Shows all config with sources\n- Gets individual values\n- Sets values persistently\n- Validates known keys","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["commands","config"],"dependencies":[{"issue_id":"bd-307","depends_on_id":"bd-302","type":"blocks","created_at":"2026-01-03T16:14:09.533350537-05:00","created_by":"daemon"},{"issue_id":"bd-307","depends_on_id":"bd-303","type":"blocks","created_at":"2026-01-03T16:14:09.563272666-05:00","created_by":"daemon"},{"issue_id":"bd-307","depends_on_id":"bd-304","type":"blocks","created_at":"2026-01-03T16:14:09.591053841-05:00","created_by":"daemon"}]}
{"id":"bd-308","title":"Auto-init on first run","description":"**Automatically initialize config on first sync**\n\n## What\nWhen user runs `ru sync` with no config, automatically initialize instead of erroring.\n\n## Why\nForcing `ru init` as a separate step is poor UX. Modern CLI tools should 'just work' on first run.\n\n## Behavior\n```bash\n$ ru sync\nFirst run detected. Initializing configuration...\n  Created ~/.config/ru/config\n  Created ~/.config/ru/repos.d/repos.txt\n\nNo repositories configured yet.\nAdd repos with: ru add owner/repo\n\n$ echo 'But wait, what if they pass a URL directly?'\n\n$ ru sync https://github.com/owner/repo\nFirst run detected. Initializing configuration...\n  Created ~/.config/ru/config  \n  Created ~/.config/ru/repos.d/repos.txt\n\nAdding and syncing: owner/repo\n  Cloned: owner/repo\n```\n\n## Implementation\nIn cmd_sync(), before processing:\n```bash\nif [[ ! -d \"$RU_CONFIG_DIR\" ]]; then\n    log_info \"First run detected. Initializing configuration...\"\n    ensure_config_exists\n    # If args provided, treat as ad-hoc sync\n    # If no args, explain how to add repos\nfi\n```\n\n## Acceptance Criteria\n- First sync auto-initializes\n- If URL/repo passed, add and sync it\n- If no args, explain next steps\n- `ru init` still works for explicit initialization","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["config","ux"],"dependencies":[{"issue_id":"bd-308","depends_on_id":"bd-3","type":"blocks","created_at":"2026-01-03T16:14:13.619210776-05:00","created_by":"daemon"},{"issue_id":"bd-308","depends_on_id":"bd-305","type":"blocks","created_at":"2026-01-03T16:14:13.648556659-05:00","created_by":"daemon"}]}
{"id":"bd-309","title":"Simplify to single repos.txt by default","description":"**Use single repos.txt file instead of public/private split**\n\n## What\nChange from public.txt + private.txt to single repos.txt file.\n\n## Why\nThe public/private split adds complexity without clear benefit:\n- gh handles auth automatically\n- Most users don't need the separation\n- Simpler mental model = better UX\n\n## Design\n```\n~/.config/ru/repos.d/\n└── repos.txt          # All repos, public and private\n```\n\nIf users want organization, they can add comments:\n```\n# My projects\nowner/repo1\nowner/repo2\n\n# Work projects (private)\ncompany/internal-tool\ncompany/secret-project\n```\n\n## Migration\nIf old public.txt/private.txt exist:\n1. Merge into repos.txt\n2. Keep originals as backup\n3. Log migration message\n\n## ru add Changes\n- Remove --private flag (no longer needed)\n- Just add to repos.txt\n\n## Acceptance Criteria\n- Single repos.txt is default\n- Old format auto-migrates\n- `ru add` simplified\n- Comments work for organization","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["config","simplicity"],"dependencies":[{"issue_id":"bd-309","depends_on_id":"bd-3","type":"blocks","created_at":"2026-01-03T16:14:13.678924519-05:00","created_by":"daemon"},{"issue_id":"bd-309","depends_on_id":"bd-305","type":"blocks","created_at":"2026-01-03T16:14:13.70835933-05:00","created_by":"daemon"}]}
{"id":"bd-310","title":"Change default PROJECTS_DIR to ~/projects","description":"**Use ~/projects as default instead of /data/projects**\n\n## What\nChange DEFAULT_PROJECTS_DIR from /data/projects to ~/projects.\n\n## Why\n/data/projects is very specific and unusual:\n- Most users don't have /data\n- It's not a standard path\n- ~/projects is more universally appropriate\n\n## Implementation\n```bash\n# Old\nDEFAULT_PROJECTS_DIR=\"/data/projects\"\n\n# New\nDEFAULT_PROJECTS_DIR=\"$HOME/projects\"\n```\n\n## First Run\nOn first run, if ~/projects doesn't exist, ask:\n```\nWhere should repositories be cloned?\n  [1] ~/projects (will be created)\n  [2] Current directory: /path/to/cwd\n  [3] Custom path\n```\n\nOr just default to ~/projects and create it.\n\n## Acceptance Criteria\n- Default is ~/projects\n- Works on macOS and Linux\n- Creates directory if needed\n- User can override via config","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["config","ux"],"dependencies":[{"issue_id":"bd-310","depends_on_id":"bd-3","type":"blocks","created_at":"2026-01-03T16:14:13.736775722-05:00","created_by":"daemon"},{"issue_id":"bd-310","depends_on_id":"bd-203","type":"blocks","created_at":"2026-01-03T16:14:13.767564444-05:00","created_by":"daemon"}]}
{"id":"bd-4","title":"Phase 4: Logging System","description":"**EPIC: Structured Logging \u0026 Output System**\n\n## Goal\nImplement a logging system that maintains strict stream separation: stderr for human-readable output, stdout for structured data only.\n\n## Rationale\nThis is an automation-grade tool. When someone runs `ru sync --json | jq .`, they need clean JSON on stdout without progress messages mixed in. Conversely, interactive users need beautiful, informative progress output. Stream separation makes both possible.\n\n## Stream Rules\n- stderr: log_info, log_warn, log_error, log_step, log_success, banners, summaries\n- stdout: JSON output (--json mode), repo paths (default mode)\n\n## Per-Repo Logging\nEach repo's git output goes to a dated log file: ~/.local/state/ru/logs/YYYY-MM-DD/repos/owner_repo.log. This allows debugging without cluttering terminal output.\n\n## NDJSON Result Tracking\nDuring runs, we write newline-delimited JSON records to a temp file. This allows aggregation for summary reports without holding everything in memory.\n\n## Success Criteria\n- Running `ru sync 2\u003e/dev/null` produces only structured output\n- Running `ru sync --json 2\u003e\u00261` shows progress on stderr, JSON on stdout\n- Per-repo logs are written and accessible","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["logging","output"],"dependencies":[{"issue_id":"bd-4","depends_on_id":"bd-2","type":"blocks","created_at":"2026-01-03T16:14:08.049523389-05:00","created_by":"daemon"}]}
{"id":"bd-401","title":"Implement log_info(), log_warn(), log_error()","description":"**Implement basic logging functions**\n\n## What\nCore logging functions for info, warning, and error messages.\n\n## Why\nConsistent logging with proper coloring and stream targeting improves UX and debuggability.\n\n## Stream Rule: ALL go to stderr\nHuman-readable output ALWAYS goes to stderr. This keeps stdout clean for structured data.\n\n## Implementation\n```bash\nlog_info() {\n    [[ \"$QUIET_MODE\" == \"true\" ]] \u0026\u0026 return\n    echo -e \"${BLUE}info:${NC} $*\" \u003e\u00262\n}\n\nlog_warn() {\n    echo -e \"${YELLOW}warn:${NC} $*\" \u003e\u00262\n}\n\nlog_error() {\n    echo -e \"${RED}error:${NC} $*\" \u003e\u00262\n}\n```\n\n## Quiet Mode\nlog_info respects QUIET_MODE. log_warn and log_error always print (errors should never be silenced).\n\n## Acceptance Criteria\n- All output goes to stderr\n- Colors applied correctly\n- Quiet mode silences info only","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["logging"],"dependencies":[{"issue_id":"bd-401","depends_on_id":"bd-4","type":"blocks","created_at":"2026-01-03T16:14:09.622072877-05:00","created_by":"daemon"},{"issue_id":"bd-401","depends_on_id":"bd-204","type":"blocks","created_at":"2026-01-03T16:14:09.650551877-05:00","created_by":"daemon"},{"issue_id":"bd-401","depends_on_id":"bd-205","type":"blocks","created_at":"2026-01-03T16:14:09.679551689-05:00","created_by":"daemon"}]}
{"id":"bd-402","title":"Implement log_step(), log_success(), log_debug()","description":"**Implement progress and debug logging**\n\n## What\nFunctions for step progress, success indicators, and debug output.\n\n## Why\nProgress indication keeps users informed. Debug output aids troubleshooting.\n\n## Implementation\n```bash\nlog_step() {\n    [[ \"$QUIET_MODE\" == \"true\" ]] \u0026\u0026 return\n    echo -e \"${CYAN}→${NC} $*\" \u003e\u00262\n}\n\nlog_success() {\n    [[ \"$QUIET_MODE\" == \"true\" ]] \u0026\u0026 return\n    echo -e \"${GREEN}✓${NC} $*\" \u003e\u00262\n}\n\nlog_debug() {\n    [[ \"$VERBOSE_MODE\" != \"true\" ]] \u0026\u0026 return\n    echo -e \"${DIM}debug:${NC} $*\" \u003e\u00262\n}\n```\n\n## Verbose Mode\nlog_debug only prints when VERBOSE_MODE is true. Useful for troubleshooting without cluttering normal output.\n\n## Acceptance Criteria\n- Step shows arrow prefix\n- Success shows checkmark\n- Debug only shows in verbose mode","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["logging"],"dependencies":[{"issue_id":"bd-402","depends_on_id":"bd-401","type":"blocks","created_at":"2026-01-03T16:14:09.708428388-05:00","created_by":"daemon"}]}
{"id":"bd-403","title":"Implement output_json()","description":"**Implement JSON output to stdout**\n\n## What\nFunction to output JSON data to stdout (ONLY in json mode).\n\n## Why\nStructured output enables piping to jq, parsing by scripts, integration with other tools.\n\n## Critical: stdout ONLY\nJSON goes to stdout. Progress/errors go to stderr. This enables `ru sync --json 2\u003e/dev/null | jq .`\n\n## Implementation\n```bash\noutput_json() {\n    if [[ \"$JSON_MODE\" == \"true\" ]]; then\n        echo \"$1\"  # stdout\n    fi\n}\n```\n\n## Acceptance Criteria\n- Output goes to stdout\n- Only outputs in JSON_MODE\n- Valid JSON (caller responsibility)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:38.351162445-05:00","closed_at":"2026-01-03T16:18:38.351162445-05:00","close_reason":"Already implemented in ru script","labels":["json","logging"],"dependencies":[{"issue_id":"bd-403","depends_on_id":"bd-205","type":"blocks","created_at":"2026-01-03T16:14:09.738283211-05:00","created_by":"daemon"}]}
{"id":"bd-404","title":"Implement get_repo_log_path()","description":"**Generate per-repo log file paths**\n\n## What\nFunction to generate consistent log paths for each repository.\n\n## Why\nPer-repo logs allow detailed debugging without cluttering terminal. Users can review git output after the fact.\n\n## Path Structure\n```\n~/.local/state/ru/logs/\n├── 2026-01-03/\n│   ├── run.log\n│   └── repos/\n│       ├── github.com_owner_repo1.log\n│       └── github.com_owner_repo2.log\n└── latest -\u003e 2026-01-03\n```\n\n## Implementation\n```bash\nget_repo_log_path() {\n    local repo_name=\"$1\"\n    local date_dir\n    date_dir=$(date +%Y-%m-%d)\n    # Replace / with _ for filesystem safety\n    echo \"${RU_LOG_DIR}/${date_dir}/repos/${repo_name//\\//_}.log\"\n}\n```\n\n## Acceptance Criteria\n- Paths are deterministic\n- Date-organized\n- Safe for filesystem (no slashes in filename)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["logging"],"dependencies":[{"issue_id":"bd-404","depends_on_id":"bd-202","type":"blocks","created_at":"2026-01-03T16:14:09.768614221-05:00","created_by":"daemon"}]}
{"id":"bd-405","title":"Implement write_result()","description":"**Write NDJSON result records**\n\n## What\nFunction to append a result record to the temp results file.\n\n## Why\nWe accumulate results during processing for later aggregation. NDJSON (newline-delimited JSON) is easy to parse and append.\n\n## Implementation\n```bash\nwrite_result() {\n    local repo=\"$1\"\n    local action=\"$2\"\n    local status=\"$3\"\n    local duration=\"${4:-}\"\n    local error=\"${5:-}\"\n\n    # Escape for JSON\n    error=\"${error//\\\"/\\\\\\\"}\"\n    error=\"${error//$'\\n'/\\\\n}\"\n\n    cat \u003e\u003e \"$RESULTS_FILE\" \u003c\u003c EOF\n{\"repo\":\"$repo\",\"action\":\"$action\",\"status\":\"$status\",\"duration\":${duration:-null},\"error\":\"$error\",\"timestamp\":\"$(date -u +%Y-%m-%dT%H:%M:%SZ)\"}\nEOF\n}\n```\n\n## Result Fields\n- repo: Repository identifier\n- action: clone|pull|skip\n- status: ok|current|updated|failed|diverged|conflict|dry_run\n- duration: Seconds (null if not applicable)\n- error: Error message (empty string if none)\n- timestamp: ISO 8601 UTC\n\n## Acceptance Criteria\n- Valid JSON per line\n- Proper escaping of special characters\n- Appends to temp file","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:18:38.353268001-05:00","closed_at":"2026-01-03T16:18:38.353268001-05:00","close_reason":"Already implemented in ru script","labels":["json","logging"],"dependencies":[{"issue_id":"bd-405","depends_on_id":"bd-206","type":"blocks","created_at":"2026-01-03T16:14:09.800661474-05:00","created_by":"daemon"}]}
{"id":"bd-406","title":"Test stream separation","description":"**Verify human output on stderr, data on stdout**\n\n## What\nTest that stream separation works correctly.\n\n## Why\nThis is a critical invariant. If progress messages leak to stdout, JSON parsing breaks.\n\n## Test Cases\n```bash\n# Test 1: Human output only on stderr\nru sync 2\u003e/dev/null  # Should produce no output (all human stuff filtered)\n\n# Test 2: JSON on stdout, progress on stderr\nru sync --json \u003e out.json 2\u003e err.log\ncat out.json | jq .  # Should be valid JSON\ncat err.log  # Should contain progress messages\n\n# Test 3: Combined view\nru sync --json  # Human-readable progress, JSON at end\n```\n\n## Acceptance Criteria\n- `ru sync 2\u003e/dev/null` produces only structured output\n- JSON output is valid\n- Human messages don't pollute stdout","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["logging","testing"],"dependencies":[{"issue_id":"bd-406","depends_on_id":"bd-401","type":"blocks","created_at":"2026-01-03T16:14:09.829895807-05:00","created_by":"daemon"},{"issue_id":"bd-406","depends_on_id":"bd-403","type":"blocks","created_at":"2026-01-03T16:14:09.85924124-05:00","created_by":"daemon"}]}
{"id":"bd-5","title":"Phase 5: Gum Integration","description":"**EPIC: Beautiful Terminal UI with Gum**\n\n## Goal\nIntegrate charmbracelet/gum for beautiful terminal UI while maintaining full functionality when gum is unavailable.\n\n## Rationale\nTerminal UX matters. A beautiful, informative display builds user confidence and makes the tool pleasant to use. However, we can't require gum - CI environments and minimal systems won't have it. Every gum feature needs an ANSI fallback.\n\n## Gum Features to Use\n- gum style: Boxed banners and styled text\n- gum confirm: Yes/No prompts\n- gum spin: Spinners during operations\n- gum choose: Multi-select menus (future)\n\n## Fallback Strategy\nCheck GUM_AVAILABLE at startup. If false, all gum_* wrapper functions use ANSI codes and basic read prompts instead. The user experience degrades gracefully but remains functional.\n\n## Success Criteria\n- With gum: Beautiful boxed output, spinners, styled prompts\n- Without gum: Functional ANSI-colored output, basic prompts\n- No crashes or errors in either mode","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["gum","ui"],"dependencies":[{"issue_id":"bd-5","depends_on_id":"bd-4","type":"blocks","created_at":"2026-01-03T16:14:08.103749202-05:00","created_by":"daemon"}]}
{"id":"bd-501","title":"Implement check_gum()","description":"**Detect gum availability**\n\n## What\nFunction to check if charmbracelet/gum is installed and set GUM_AVAILABLE flag.\n\n## Why\nGum provides beautiful UI, but we can't require it. We need graceful degradation.\n\n## Implementation\n```bash\ncheck_gum() {\n    if command -v gum \u0026\u003e/dev/null; then\n        GUM_AVAILABLE=true\n    else\n        GUM_AVAILABLE=false\n    fi\n}\n```\n\n## When to Check\nCalled once at script startup in main(), before any UI output.\n\n## Acceptance Criteria\n- Correctly detects gum presence\n- Sets global flag for other functions\n- No error output if gum missing","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["gum","ui"],"dependencies":[{"issue_id":"bd-501","depends_on_id":"bd-5","type":"blocks","created_at":"2026-01-03T16:14:09.888569581-05:00","created_by":"daemon"},{"issue_id":"bd-501","depends_on_id":"bd-205","type":"blocks","created_at":"2026-01-03T16:14:09.919379012-05:00","created_by":"daemon"}]}
{"id":"bd-502","title":"Implement gum_confirm()","description":"**Yes/No confirmation with fallback**\n\n## What\nFunction for yes/no prompts using gum confirm with fallback to read.\n\n## Why\nWe need confirmations for destructive operations and optional installations. Must work with or without gum.\n\n## Implementation\n```bash\ngum_confirm() {\n    local prompt=\"$1\"\n    local default=\"${2:-n}\"  # Default to No for safety\n    \n    if ! can_prompt; then\n        # Non-interactive: return based on default\n        [[ \"$default\" == \"y\" ]]\n        return\n    fi\n    \n    if [[ \"$GUM_AVAILABLE\" == \"true\" ]]; then\n        gum confirm \"$prompt\"\n    else\n        local response\n        local yn=\"y/N\"\n        [[ \"$default\" == \"y\" ]] \u0026\u0026 yn=\"Y/n\"\n        echo -n \"$prompt [$yn]: \" \u003e\u00262\n        read -r response\n        response=\"${response:-$default}\"\n        [[ \"${response,,}\" == \"y\" || \"${response,,}\" == \"yes\" ]]\n    fi\n}\n```\n\n## Acceptance Criteria\n- Uses gum when available\n- Falls back to read prompt\n- Respects non-interactive mode\n- Defaults safely to No","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["gum","ui"],"dependencies":[{"issue_id":"bd-502","depends_on_id":"bd-501","type":"blocks","created_at":"2026-01-03T16:14:09.948098104-05:00","created_by":"daemon"},{"issue_id":"bd-502","depends_on_id":"bd-207","type":"blocks","created_at":"2026-01-03T16:14:09.977713455-05:00","created_by":"daemon"}]}
{"id":"bd-503","title":"Implement gum_spin()","description":"**Spinner with fallback**\n\n## What\nFunction to show a spinner during operations with fallback to simple output.\n\n## Why\nSpinners provide feedback during potentially long operations. Without gum, we show static messages.\n\n## Implementation\n```bash\ngum_spin() {\n    local title=\"$1\"\n    shift\n    \n    if [[ \"$GUM_AVAILABLE\" == \"true\" \u0026\u0026 \"$QUIET_MODE\" != \"true\" ]]; then\n        gum spin --spinner dot --title \"$title\" -- \"$@\"\n    else\n        [[ \"$QUIET_MODE\" != \"true\" ]] \u0026\u0026 echo -e \"${CYAN}→${NC} $title\" \u003e\u00262\n        \"$@\"\n    fi\n}\n```\n\n## Note on Usage\nNot heavily used in v1 since we show per-repo progress. May be useful for operations like 'Checking for updates...'\n\n## Acceptance Criteria\n- Shows spinner with gum\n- Shows static message without gum\n- Executes command in both cases\n- Respects quiet mode","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["gum","ui"],"dependencies":[{"issue_id":"bd-503","depends_on_id":"bd-501","type":"blocks","created_at":"2026-01-03T16:14:10.005399672-05:00","created_by":"daemon"}]}
{"id":"bd-504","title":"Implement print_banner()","description":"**Styled banner display**\n\n## What\nFunction to print the tool banner at startup.\n\n## Why\nA nice banner establishes identity and professionalism. Different styles for gum vs ANSI.\n\n## With Gum\n```\n╭──────────────────────────────────────╮\n│  🔄 ru v1.0.0                        │\n│  Repo Updater                        │\n╰──────────────────────────────────────╯\n```\n\n## Without Gum (ANSI)\n```\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n  ru v1.0.0 - Repo Updater\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n```\n\n## Implementation\n```bash\nprint_banner() {\n    [[ \"$QUIET_MODE\" == \"true\" ]] \u0026\u0026 return\n    \n    if [[ \"$GUM_AVAILABLE\" == \"true\" ]]; then\n        gum style --border rounded --padding \"0 2\" \\\n            \"🔄 ru v$VERSION\" \"Repo Updater\"\n    else\n        echo -e \"${BOLD}━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━${NC}\" \u003e\u00262\n        echo -e \"  ${BOLD}ru${NC} v$VERSION - Repo Updater\" \u003e\u00262\n        echo -e \"${BOLD}━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━${NC}\" \u003e\u00262\n    fi\n}\n```\n\n## Acceptance Criteria\n- Beautiful with gum\n- Acceptable without gum\n- Respects quiet mode\n- Goes to stderr","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["gum","ui"],"dependencies":[{"issue_id":"bd-504","depends_on_id":"bd-501","type":"blocks","created_at":"2026-01-03T16:14:10.033374852-05:00","created_by":"daemon"},{"issue_id":"bd-504","depends_on_id":"bd-202","type":"blocks","created_at":"2026-01-03T16:14:10.084853619-05:00","created_by":"daemon"}]}
{"id":"bd-505","title":"Test gum available and unavailable modes","description":"**Test both UI modes**\n\n## What\nVerify the tool works correctly with and without gum installed.\n\n## Why\nUsers without gum must have full functionality. We can't assume everyone has it.\n\n## Test Scenarios\n1. With gum installed: Full beautiful output\n2. Without gum: Functional ANSI fallback\n3. With --quiet: Minimal output in both modes\n4. Non-interactive: No prompts in either mode\n\n## Test Method\n```bash\n# Test without gum\nPATH_WITHOUT_GUM=$(echo $PATH | tr ':' '\\n' | grep -v gum | tr '\\n' ':')\nPATH=\"$PATH_WITHOUT_GUM\" ru sync --dry-run\n\n# Test with gum\nru sync --dry-run\n```\n\n## Acceptance Criteria\n- No crashes when gum missing\n- All functions work in both modes\n- Prompts work or fail gracefully","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["testing","ui"],"dependencies":[{"issue_id":"bd-505","depends_on_id":"bd-502","type":"blocks","created_at":"2026-01-03T16:14:10.117877643-05:00","created_by":"daemon"},{"issue_id":"bd-505","depends_on_id":"bd-503","type":"blocks","created_at":"2026-01-03T16:14:10.14740588-05:00","created_by":"daemon"},{"issue_id":"bd-505","depends_on_id":"bd-504","type":"blocks","created_at":"2026-01-03T16:14:10.175920177-05:00","created_by":"daemon"}]}
{"id":"bd-6","title":"Phase 6: Dependency Management","description":"**EPIC: GitHub CLI Detection \u0026 Dependency Management**\n\n## Goal\nImplement robust detection and guided installation of dependencies, particularly the GitHub CLI (gh), without ever auto-installing without consent.\n\n## Rationale\nThe tool needs gh for cloning private repos and API access. But automatically installing system packages is invasive and breaks trust. We detect, inform, and prompt - never auto-install unless explicitly requested.\n\n## Dependency Flow\n1. Check if gh is installed (command -v gh)\n2. If missing and can_prompt(): offer to install with user confirmation\n3. If missing and non-interactive: fail with clear instructions\n4. If installed: check if authenticated (gh auth status)\n5. If not authed and can_prompt(): offer to run gh auth login\n6. If not authed and non-interactive: fail with GH_TOKEN instructions\n\n## Non-Interactive Mode\nCI/automation needs `--non-interactive` to never hang on prompts. In this mode, missing deps or auth always fails immediately with actionable error messages.\n\n## Success Criteria\n- Interactive mode prompts for missing deps\n- Non-interactive mode fails cleanly with instructions\n- `ru doctor` reports all dependency status clearly","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["deps","gh"],"dependencies":[{"issue_id":"bd-6","depends_on_id":"bd-5","type":"blocks","created_at":"2026-01-03T16:14:08.132125739-05:00","created_by":"daemon"}]}
{"id":"bd-601","title":"Implement detect_os()","description":"**Detect operating system**\n\n## What\nFunction to detect if running on macOS or Linux.\n\n## Why\nInstallation commands differ by OS. We need to know which instructions to give.\n\n## Implementation\n```bash\ndetect_os() {\n    case \"$(uname -s)\" in\n        Darwin) echo \"macos\" ;;\n        Linux)  echo \"linux\" ;;\n        *)      echo \"unknown\" ;;\n    esac\n}\n```\n\n## Acceptance Criteria\n- Returns 'macos' on macOS\n- Returns 'linux' on Linux\n- Returns 'unknown' for others","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["deps"],"dependencies":[{"issue_id":"bd-601","depends_on_id":"bd-6","type":"blocks","created_at":"2026-01-03T16:14:10.206049145-05:00","created_by":"daemon"}]}
{"id":"bd-602","title":"Implement check_gh_installed()","description":"**Check if GitHub CLI is installed**\n\n## What\nFunction to check if gh is in PATH.\n\n## Why\ngh is required for cloning private repos and provides better API access. We need to know if it's available.\n\n## Implementation\n```bash\ncheck_gh_installed() {\n    command -v gh \u0026\u003e/dev/null\n}\n```\n\n## Acceptance Criteria\n- Returns 0 if gh found\n- Returns 1 if gh missing\n- No output","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["deps","gh"],"dependencies":[{"issue_id":"bd-602","depends_on_id":"bd-601","type":"blocks","created_at":"2026-01-03T16:14:10.236202701-05:00","created_by":"daemon"}]}
{"id":"bd-603","title":"Implement check_gh_authenticated()","description":"**Check if GitHub CLI is authenticated**\n\n## What\nFunction to check if gh is logged in.\n\n## Why\nInstalled but not authenticated gh is useless for private repos. We need to check both.\n\n## Implementation\n```bash\ncheck_gh_authenticated() {\n    gh auth status \u0026\u003e/dev/null\n}\n```\n\n## Note on GH_TOKEN\n`gh auth status` also succeeds if GH_TOKEN env var is set, which is the CI pattern.\n\n## Acceptance Criteria\n- Returns 0 if authenticated (or GH_TOKEN set)\n- Returns 1 if not authenticated\n- No output","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["deps","gh"],"dependencies":[{"issue_id":"bd-603","depends_on_id":"bd-602","type":"blocks","created_at":"2026-01-03T16:14:10.266301483-05:00","created_by":"daemon"}]}
{"id":"bd-604","title":"Implement prompt_install_gh()","description":"**Prompt to install GitHub CLI**\n\n## What\nFunction that explains gh is needed and offers to help install it.\n\n## Why\nWe guide users to install gh rather than failing with a cryptic error. But we NEVER auto-install without consent.\n\n## Implementation\n```bash\nprompt_install_gh() {\n    if ! can_prompt; then\n        log_error \"GitHub CLI (gh) is required but not installed.\"\n        log_error \"Install it manually: https://cli.github.com/\"\n        log_error \"Or run with RU_INSTALL_DEPS=1 to auto-install.\"\n        return 1\n    fi\n\n    log_warn \"GitHub CLI (gh) is not installed.\"\n    log_info \"It's required for cloning private repositories.\"\n    \n    local install_cmd=\"\"\n    case \"$(detect_os)\" in\n        macos)\n            if command -v brew \u0026\u003e/dev/null; then\n                install_cmd=\"brew install gh\"\n            fi\n            ;;\n        linux)\n            # Detect package manager\n            if command -v apt-get \u0026\u003e/dev/null; then\n                log_info \"See: https://github.com/cli/cli/blob/trunk/docs/install_linux.md\"\n            elif command -v dnf \u0026\u003e/dev/null; then\n                install_cmd=\"sudo dnf install gh\"\n            fi\n            ;;\n    esac\n\n    if [[ -n \"$install_cmd\" ]]; then\n        if gum_confirm \"Install gh now with: $install_cmd\"; then\n            log_step \"Installing gh...\"\n            eval \"$install_cmd\"\n            return $?\n        fi\n    fi\n    \n    log_error \"Please install gh manually: https://cli.github.com/\"\n    return 1\n}\n```\n\n## Acceptance Criteria\n- Shows helpful message\n- Offers install on supported systems\n- Never auto-installs without confirmation\n- Fails cleanly in non-interactive mode","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["deps","gh"],"dependencies":[{"issue_id":"bd-604","depends_on_id":"bd-601","type":"blocks","created_at":"2026-01-03T16:14:10.296104849-05:00","created_by":"daemon"},{"issue_id":"bd-604","depends_on_id":"bd-502","type":"blocks","created_at":"2026-01-03T16:14:10.326083495-05:00","created_by":"daemon"}]}
{"id":"bd-605","title":"Implement prompt_gh_auth()","description":"**Prompt for GitHub CLI authentication**\n\n## What\nFunction that helps users authenticate gh.\n\n## Why\nUnauthorized gh can't access private repos. We guide users through auth.\n\n## Implementation\n```bash\nprompt_gh_auth() {\n    if ! can_prompt; then\n        log_error \"GitHub CLI is not authenticated.\"\n        log_error \"For CI/scripts, set GH_TOKEN environment variable.\"\n        log_error \"For interactive use, run: gh auth login\"\n        return 1\n    fi\n\n    log_warn \"GitHub CLI is installed but not authenticated.\"\n    \n    if gum_confirm \"Run 'gh auth login' now?\"; then\n        gh auth login\n        return $?\n    fi\n    \n    log_error \"Authentication required. Run: gh auth login\"\n    return 1\n}\n```\n\n## CI Pattern\nFor non-interactive mode, we tell users to set GH_TOKEN. This is the standard CI pattern.\n\n## Acceptance Criteria\n- Offers to run gh auth login\n- Provides GH_TOKEN instructions for CI\n- Never hangs in non-interactive mode","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["deps","gh"],"dependencies":[{"issue_id":"bd-605","depends_on_id":"bd-603","type":"blocks","created_at":"2026-01-03T16:14:10.355549304-05:00","created_by":"daemon"},{"issue_id":"bd-605","depends_on_id":"bd-502","type":"blocks","created_at":"2026-01-03T16:14:10.38497035-05:00","created_by":"daemon"}]}
{"id":"bd-606","title":"Implement ensure_dependencies()","description":"**Full dependency check flow**\n\n## What\nOrchestrates the complete dependency verification flow.\n\n## Why\nOne function to verify all deps are ready before main processing.\n\n## Flow\n1. Check git (always required)\n2. Check gh installed -\u003e prompt install if missing\n3. Check gh authenticated -\u003e prompt auth if not\n4. Optional: Check for gum and suggest\n\n## Implementation\n```bash\nensure_dependencies() {\n    # Git is mandatory\n    if ! command -v git \u0026\u003e/dev/null; then\n        log_error \"git is required but not installed.\"\n        return 3  # Dependency error\n    fi\n    \n    # gh is needed for private repos\n    if ! check_gh_installed; then\n        prompt_install_gh || return 3\n    fi\n    \n    # Check again after potential install\n    if ! check_gh_installed; then\n        log_error \"gh installation failed or was declined.\"\n        return 3\n    fi\n    \n    # Check authentication\n    if ! check_gh_authenticated; then\n        prompt_gh_auth || return 3\n    fi\n    \n    log_debug \"All dependencies satisfied\"\n    return 0\n}\n```\n\n## Acceptance Criteria\n- Checks all deps in order\n- Prompts when possible\n- Fails cleanly when not\n- Returns exit code 3 for dep errors","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["deps"],"dependencies":[{"issue_id":"bd-606","depends_on_id":"bd-602","type":"blocks","created_at":"2026-01-03T16:14:10.414463431-05:00","created_by":"daemon"},{"issue_id":"bd-606","depends_on_id":"bd-603","type":"blocks","created_at":"2026-01-03T16:14:10.443175209-05:00","created_by":"daemon"},{"issue_id":"bd-606","depends_on_id":"bd-604","type":"blocks","created_at":"2026-01-03T16:14:10.472119717-05:00","created_by":"daemon"},{"issue_id":"bd-606","depends_on_id":"bd-605","type":"blocks","created_at":"2026-01-03T16:14:10.500715497-05:00","created_by":"daemon"}]}
{"id":"bd-607","title":"Test non-interactive mode dependency flow","description":"**Test deps in non-interactive mode**\n\n## What\nVerify dependency checks work correctly without user interaction.\n\n## Why\nCI/automation must fail fast with clear errors, never hang waiting for input.\n\n## Test Cases\n```bash\n# Should fail immediately with instructions\nru sync --non-interactive  # When gh missing\nru sync --non-interactive  # When gh not authed\n\n# Should work with GH_TOKEN\nGH_TOKEN=xxx ru sync --non-interactive\n```\n\n## Expected Behavior\n- Never prompts\n- Fails with exit code 3\n- Provides actionable error messages\n- Works with GH_TOKEN\n\n## Acceptance Criteria\n- No hangs in non-interactive mode\n- Clear error messages\n- GH_TOKEN authentication works","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["deps","testing"],"dependencies":[{"issue_id":"bd-607","depends_on_id":"bd-606","type":"blocks","created_at":"2026-01-03T16:14:10.530964903-05:00","created_by":"daemon"}]}
{"id":"bd-608","title":"Make gh CLI optional for public repos","description":"**Fall back to git clone for public repos**\n\n## What\nMake gh CLI optional when only syncing public repositories.\n\n## Why\nMany users only sync public repos. Requiring gh installation for this is unnecessary friction. The original plan over-relied on gh.\n\n## Design Change\n1. Try `git clone https://github.com/owner/repo` first for HTTPS URLs\n2. If that fails with auth error, THEN check for gh\n3. Only require gh if:\n   - User has private repos in their list\n   - Public clone fails with auth error\n   - User explicitly wants gh features\n\n## Implementation\n```bash\ndo_clone() {\n    local url=\"$1\"\n    local target_dir=\"$2\"\n    \n    # Try plain git clone first (works for public repos)\n    if output=$(git clone --quiet \"$url\" \"$target_dir\" 2\u003e\u00261); then\n        log_success \"Cloned: $repo_name\"\n        return 0\n    fi\n    \n    # If auth error, try gh\n    if [[ \"$output\" =~ (Authentication|403|401) ]] \u0026\u0026 check_gh_installed \u0026\u0026 check_gh_authenticated; then\n        local clone_target\n        clone_target=$(url_to_clone_target \"$url\")\n        if gh repo clone \"$clone_target\" \"$target_dir\" -- --quiet 2\u003e\u00261; then\n            log_success \"Cloned (via gh): $repo_name\"\n            return 0\n        fi\n    fi\n    \n    log_error \"Clone failed: $repo_name\"\n    return 1\n}\n```\n\n## ensure_dependencies() Change\nDon't fail if gh is missing. Instead:\n- Warn that private repos won't work\n- Continue for public repos\n\n## Acceptance Criteria\n- Public repos clone without gh\n- Private repos work with gh\n- Clear messaging about what requires gh\n- `ru doctor` shows gh status as optional","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["deps","ux"],"dependencies":[{"issue_id":"bd-608","depends_on_id":"bd-6","type":"blocks","created_at":"2026-01-03T16:14:13.558501167-05:00","created_by":"daemon"},{"issue_id":"bd-608","depends_on_id":"bd-602","type":"blocks","created_at":"2026-01-03T16:14:13.590518915-05:00","created_by":"daemon"}]}
{"id":"bd-7","title":"Phase 7: URL \u0026 Path Parsing","description":"**EPIC: Repository URL Parsing \u0026 Path Resolution**\n\n## Goal\nImplement robust parsing of all GitHub URL formats and layout-aware local path resolution.\n\n## Rationale\nUsers will throw every URL format at us: HTTPS, SSH, shorthand (owner/repo), with or without .git suffix. We must handle them all correctly. Additionally, the local path depends on the configured layout (flat, owner-repo, full).\n\n## Supported URL Formats\n- https://github.com/owner/repo\n- https://github.com/owner/repo.git\n- git@github.com:owner/repo.git\n- github.com/owner/repo\n- owner/repo (assumes github.com)\n\n## Layout Strategies\n- flat: /data/projects/repo (simple, backwards compatible)\n- owner-repo: /data/projects/owner/repo (avoids collisions)\n- full: /data/projects/github.com/owner/repo (multi-host ready)\n\n## Collision Detection\nWith flat layout, owner1/utils and owner2/utils collide. We must detect and warn about this before processing.\n\n## Success Criteria\n- All URL formats parse correctly\n- Paths resolve correctly for all layout modes\n- Collisions are detected and reported","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["parsing","urls"],"dependencies":[{"issue_id":"bd-7","depends_on_id":"bd-2","type":"blocks","created_at":"2026-01-03T16:14:08.160038502-05:00","created_by":"daemon"}]}
{"id":"bd-701","title":"Implement parse_repo_url()","description":"**Parse all GitHub URL formats**\n\n## What\nFunction to extract host, owner, and repo from various URL formats.\n\n## Why\nUsers will provide URLs in many formats. We must handle them all correctly.\n\n## Supported Formats\n1. https://github.com/owner/repo\n2. https://github.com/owner/repo.git\n3. git@github.com:owner/repo.git\n4. github.com/owner/repo\n5. owner/repo (assumes github.com)\n\n## Implementation\n```bash\nparse_repo_url() {\n    local url=\"$1\"\n    local -n _host=$2\n    local -n _owner=$3\n    local -n _repo=$4\n\n    # Normalize: strip .git suffix\n    url=\"${url%.git}\"\n\n    if [[ \"$url\" =~ ^git@([^:]+):(.+)/(.+)$ ]]; then\n        _host=\"${BASH_REMATCH[1]}\"\n        _owner=\"${BASH_REMATCH[2]}\"\n        _repo=\"${BASH_REMATCH[3]}\"\n    elif [[ \"$url\" =~ ^https?://([^/]+)/([^/]+)/([^/]+)$ ]]; then\n        _host=\"${BASH_REMATCH[1]}\"\n        _owner=\"${BASH_REMATCH[2]}\"\n        _repo=\"${BASH_REMATCH[3]}\"\n    elif [[ \"$url\" =~ ^([^/]+)/([^/]+)/([^/]+)$ ]]; then\n        _host=\"${BASH_REMATCH[1]}\"\n        _owner=\"${BASH_REMATCH[2]}\"\n        _repo=\"${BASH_REMATCH[3]}\"\n    elif [[ \"$url\" =~ ^([^/]+)/([^/]+)$ ]]; then\n        _host=\"github.com\"\n        _owner=\"${BASH_REMATCH[1]}\"\n        _repo=\"${BASH_REMATCH[2]}\"\n    else\n        return 1\n    fi\n}\n```\n\n## Using nameref\nWe use bash nameref (-n) to return multiple values. Requires Bash 4.3+.\n\n## Acceptance Criteria\n- All formats parse correctly\n- Returns 1 for invalid URLs\n- Strips .git suffix automatically","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["parsing","urls"],"dependencies":[{"issue_id":"bd-701","depends_on_id":"bd-7","type":"blocks","created_at":"2026-01-03T16:14:10.559767172-05:00","created_by":"daemon"}]}
{"id":"bd-702","title":"Implement normalize_url()","description":"**Normalize URLs for comparison**\n\n## What\nConvert any URL format to canonical HTTPS form for comparison.\n\n## Why\nWe need to compare expected vs actual remote URLs. Different formats of the same repo must match.\n\n## Implementation\n```bash\nnormalize_url() {\n    local url=\"$1\"\n    # Strip .git suffix\n    url=\"${url%.git}\"\n    # Convert SSH to HTTPS\n    url=\"${url/git@github.com:/https://github.com/}\"\n    # Lowercase host (github.com vs GitHub.com)\n    echo \"$url\" | tr '[:upper:]' '[:lower:]'\n}\n```\n\n## Examples\n- `git@github.com:owner/repo.git` -\u003e `https://github.com/owner/repo`\n- `https://GitHub.com/Owner/Repo` -\u003e `https://github.com/owner/repo`\n\n## Acceptance Criteria\n- SSH URLs converted to HTTPS\n- .git suffix stripped\n- Lowercase for case-insensitive comparison","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["parsing","urls"],"dependencies":[{"issue_id":"bd-702","depends_on_id":"bd-701","type":"blocks","created_at":"2026-01-03T16:14:10.590058106-05:00","created_by":"daemon"}]}
{"id":"bd-703","title":"Implement url_to_local_path()","description":"**Resolve URL to local filesystem path**\n\n## What\nFunction to determine where a repo should live locally based on layout setting.\n\n## Why\nDifferent layout modes organize repos differently. This function encapsulates that logic.\n\n## Layout Modes\n- flat: `$PROJECTS_DIR/repo`\n- owner-repo: `$PROJECTS_DIR/owner/repo`\n- full: `$PROJECTS_DIR/github.com/owner/repo`\n\n## Implementation\n```bash\nurl_to_local_path() {\n    local url=\"$1\"\n    local projects_dir=\"$2\"\n    local layout=\"$3\"\n\n    local host owner repo\n    parse_repo_url \"$url\" host owner repo || return 1\n\n    case \"$layout\" in\n        flat)\n            echo \"${projects_dir}/${repo}\"\n            ;;\n        owner-repo)\n            echo \"${projects_dir}/${owner}/${repo}\"\n            ;;\n        full)\n            echo \"${projects_dir}/${host}/${owner}/${repo}\"\n            ;;\n        *)\n            log_error \"Unknown layout: $layout\"\n            return 1\n            ;;\n    esac\n}\n```\n\n## Acceptance Criteria\n- All layout modes work\n- Invalid layout returns error\n- Path uses resolved components","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["parsing","paths"],"dependencies":[{"issue_id":"bd-703","depends_on_id":"bd-701","type":"blocks","created_at":"2026-01-03T16:14:10.617877674-05:00","created_by":"daemon"},{"issue_id":"bd-703","depends_on_id":"bd-203","type":"blocks","created_at":"2026-01-03T16:14:10.647842784-05:00","created_by":"daemon"}]}
{"id":"bd-704","title":"Implement url_to_clone_target()","description":"**Generate clone target for gh repo clone**\n\n## What\nFunction to generate the owner/repo string that gh repo clone expects.\n\n## Why\ngh repo clone takes 'owner/repo', not full URL. We extract this from parsed URL.\n\n## Implementation\n```bash\nurl_to_clone_target() {\n    local url=\"$1\"\n    local host owner repo\n    parse_repo_url \"$url\" host owner repo || return 1\n    echo \"${owner}/${repo}\"\n}\n```\n\n## Note on Enterprise\nFor GitHub Enterprise, gh uses --hostname. Future enhancement.\n\n## Acceptance Criteria\n- Returns owner/repo format\n- Works with all input URL formats","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["parsing"],"dependencies":[{"issue_id":"bd-704","depends_on_id":"bd-701","type":"blocks","created_at":"2026-01-03T16:14:10.677356554-05:00","created_by":"daemon"}]}
{"id":"bd-705","title":"Implement sanitize_path_segment()","description":"**Sanitize path components**\n\n## What\nRemove or replace unsafe characters from path segments.\n\n## Why\nMalicious or unusual repo names could cause filesystem issues. Defense in depth.\n\n## Implementation\n```bash\nsanitize_path_segment() {\n    local segment=\"$1\"\n    # Remove leading/trailing whitespace\n    segment=\"${segment#\"${segment%%[![:space:]]*}\"}\"\n    segment=\"${segment%\"${segment##*[![:space:]]}\"}\"\n    # Replace potentially problematic characters\n    segment=\"${segment//\\//_}\"\n    segment=\"${segment//\\\\/_}\"\n    segment=\"${segment//:/_}\"\n    echo \"$segment\"\n}\n```\n\n## Characters to Handle\n- Slashes (/ \\)\n- Colons (problematic on Windows)\n- Leading dots (hidden files)\n- Control characters\n\n## Acceptance Criteria\n- Dangerous characters replaced\n- Empty segments rejected\n- Normal names pass through unchanged","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["parsing","safety"],"dependencies":[{"issue_id":"bd-705","depends_on_id":"bd-7","type":"blocks","created_at":"2026-01-03T16:14:10.707274655-05:00","created_by":"daemon"}]}
{"id":"bd-706","title":"Create scripts/test_parsing.sh","description":"**Unit tests for URL parsing**\n\n## What\nTest script to verify URL parsing works for all formats.\n\n## Why\nParsing is critical. Bugs here cause repos to be cloned to wrong locations or fail entirely.\n\n## Test Cases\n```bash\n# HTTPS URLs\nassert_parses \"https://github.com/owner/repo\" \"github.com\" \"owner\" \"repo\"\nassert_parses \"https://github.com/owner/repo.git\" \"github.com\" \"owner\" \"repo\"\n\n# SSH URLs\nassert_parses \"git@github.com:owner/repo.git\" \"github.com\" \"owner\" \"repo\"\n\n# Shorthand\nassert_parses \"owner/repo\" \"github.com\" \"owner\" \"repo\"\n\n# With host\nassert_parses \"github.com/owner/repo\" \"github.com\" \"owner\" \"repo\"\n\n# Normalization\nassert_normalizes \"git@github.com:owner/repo.git\" \"https://github.com/owner/repo\"\n\n# Local paths\nassert_path \"owner/repo\" \"flat\" \"/data/projects\" \"/data/projects/repo\"\nassert_path \"owner/repo\" \"owner-repo\" \"/data/projects\" \"/data/projects/owner/repo\"\nassert_path \"owner/repo\" \"full\" \"/data/projects\" \"/data/projects/github.com/owner/repo\"\n```\n\n## Acceptance Criteria\n- All URL formats tested\n- All layout modes tested\n- Edge cases covered\n- CI can run this script","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["parsing","testing"],"dependencies":[{"issue_id":"bd-706","depends_on_id":"bd-701","type":"blocks","created_at":"2026-01-03T16:14:10.735921071-05:00","created_by":"daemon"},{"issue_id":"bd-706","depends_on_id":"bd-702","type":"blocks","created_at":"2026-01-03T16:14:10.766284111-05:00","created_by":"daemon"},{"issue_id":"bd-706","depends_on_id":"bd-703","type":"blocks","created_at":"2026-01-03T16:14:10.796279999-05:00","created_by":"daemon"},{"issue_id":"bd-706","depends_on_id":"bd-704","type":"blocks","created_at":"2026-01-03T16:14:10.824009347-05:00","created_by":"daemon"}]}
{"id":"bd-8","title":"Phase 8: Git Operations","description":"**EPIC: Git Clone/Pull Operations with Plumbing**\n\n## Goal\nImplement git operations using plumbing commands for reliable status detection, avoiding string parsing of porcelain output.\n\n## Rationale\nParsing 'Already up to date' is fragile - it varies by git version and locale. Git plumbing commands give deterministic, parseable output. We use `git rev-list --left-right --count` for ahead/behind, `git status --porcelain` for dirty detection.\n\n## Key Patterns\n- Always use `git -C \"$repo_path\"` instead of cd\n- Capture output with `if output=$(git ... 2\u003e\u00261); then ... else exit_code=$?; fi`\n- Check for divergence by comparing old_head vs new_head after pull\n- Support multiple strategies: ff-only (safe default), rebase, merge\n\n## Remote Mismatch Detection\nIf a local repo exists but origin URL differs from expected, we warn and skip. This prevents accidentally overwriting unrelated repos.\n\n## Success Criteria\n- Clone operations work with proper error handling\n- Pull operations detect all status conditions (current, updated, diverged, conflict)\n- No string parsing of user-facing git messages","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["core","git"],"dependencies":[{"issue_id":"bd-8","depends_on_id":"bd-7","type":"blocks","created_at":"2026-01-03T16:14:08.189443577-05:00","created_by":"daemon"}]}
{"id":"bd-801","title":"Implement is_git_repo()","description":"**Check if directory is a git repository**\n\n## What\nFunction to verify a directory is a valid git repository.\n\n## Why\nBefore pulling, we need to confirm the directory is actually a git repo, not just a regular directory with the same name.\n\n## Implementation\n```bash\nis_git_repo() {\n    local dir=\"$1\"\n    [[ -d \"$dir/.git\" ]] || git -C \"$dir\" rev-parse --git-dir \u0026\u003e/dev/null\n}\n```\n\n## Why Both Checks?\n- .git directory check is fast\n- git rev-parse handles worktrees and bare repos\n\n## Acceptance Criteria\n- Returns 0 for valid git repos\n- Returns 1 for non-repos\n- Works with standard and non-standard git layouts","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["git"],"dependencies":[{"issue_id":"bd-801","depends_on_id":"bd-8","type":"blocks","created_at":"2026-01-03T16:14:10.854102128-05:00","created_by":"daemon"}]}
{"id":"bd-802","title":"Implement get_repo_status()","description":"**Get repository status using git plumbing**\n\n## What\nFunction to determine repo status (current, ahead, behind, diverged, dirty) using plumbing commands.\n\n## Why\nParsing 'Already up to date' is fragile (varies by git version and locale). Plumbing commands give deterministic output.\n\n## Implementation\n```bash\nget_repo_status() {\n    local repo_path=\"$1\"\n    local do_fetch=\"${2:-false}\"\n\n    if [[ ! -d \"$repo_path/.git\" ]]; then\n        echo \"STATUS=not_git AHEAD=0 BEHIND=0 DIRTY=false BRANCH=\"\n        return\n    fi\n\n    # Fetch if requested\n    if [[ \"$do_fetch\" == \"true\" ]]; then\n        git -C \"$repo_path\" fetch --quiet 2\u003e/dev/null || true\n    fi\n\n    # Check dirty status\n    local dirty=\"false\"\n    if [[ -n $(git -C \"$repo_path\" status --porcelain 2\u003e/dev/null) ]]; then\n        dirty=\"true\"\n    fi\n\n    # Get current branch\n    local branch\n    branch=$(git -C \"$repo_path\" symbolic-ref --short HEAD 2\u003e/dev/null || echo \"\")\n\n    # Check for upstream\n    if ! git -C \"$repo_path\" rev-parse --verify '@{u}' \u0026\u003e/dev/null; then\n        echo \"STATUS=no_upstream AHEAD=0 BEHIND=0 DIRTY=$dirty BRANCH=$branch\"\n        return\n    fi\n\n    # Get ahead/behind using plumbing\n    local ahead=0 behind=0\n    read -r ahead behind \u003c \u003c(git -C \"$repo_path\" rev-list --left-right --count HEAD...@{u} 2\u003e/dev/null || echo \"0 0\")\n\n    # Determine status\n    local status\n    if [[ \"$ahead\" -eq 0 \u0026\u0026 \"$behind\" -eq 0 ]]; then\n        status=\"current\"\n    elif [[ \"$ahead\" -eq 0 \u0026\u0026 \"$behind\" -gt 0 ]]; then\n        status=\"behind\"\n    elif [[ \"$ahead\" -gt 0 \u0026\u0026 \"$behind\" -eq 0 ]]; then\n        status=\"ahead\"\n    else\n        status=\"diverged\"\n    fi\n\n    echo \"STATUS=$status AHEAD=$ahead BEHIND=$behind DIRTY=$dirty BRANCH=$branch\"\n}\n```\n\n## Acceptance Criteria\n- Correct status detection without string parsing\n- Works with/without fetch\n- Handles missing upstream\n- Reports dirty status","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["git"],"dependencies":[{"issue_id":"bd-802","depends_on_id":"bd-801","type":"blocks","created_at":"2026-01-03T16:14:10.884043543-05:00","created_by":"daemon"}]}
{"id":"bd-803","title":"Implement get_remote_url()","description":"**Get origin remote URL**\n\n## What\nFunction to get the URL of the origin remote.\n\n## Why\nWe need to compare expected vs actual remote to detect mismatches.\n\n## Implementation\n```bash\nget_remote_url() {\n    local repo_path=\"$1\"\n    git -C \"$repo_path\" remote get-url origin 2\u003e/dev/null || echo \"\"\n}\n```\n\n## Acceptance Criteria\n- Returns origin URL\n- Returns empty string if no origin\n- Uses git -C (no cd)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["git"],"dependencies":[{"issue_id":"bd-803","depends_on_id":"bd-801","type":"blocks","created_at":"2026-01-03T16:14:10.91523278-05:00","created_by":"daemon"}]}
{"id":"bd-804","title":"Implement check_remote_mismatch()","description":"**Detect remote URL mismatches**\n\n## What\nFunction to check if a local repo's origin matches the expected URL.\n\n## Why\nIf a directory exists but has a different origin, it's probably an unrelated repo. We should warn, not overwrite.\n\n## Implementation\n```bash\ncheck_remote_mismatch() {\n    local repo_path=\"$1\"\n    local expected_url=\"$2\"\n\n    local actual_url\n    actual_url=$(get_remote_url \"$repo_path\")\n\n    # Normalize for comparison\n    local norm_expected norm_actual\n    norm_expected=$(normalize_url \"$expected_url\")\n    norm_actual=$(normalize_url \"$actual_url\")\n\n    if [[ \"$norm_expected\" != \"$norm_actual\" ]]; then\n        echo \"mismatch:expected=$norm_expected:actual=$norm_actual\"\n        return 1\n    fi\n    return 0\n}\n```\n\n## Acceptance Criteria\n- Detects mismatches after normalization\n- Same repo with different URL formats matches\n- Returns details about mismatch","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["git","safety"],"dependencies":[{"issue_id":"bd-804","depends_on_id":"bd-702","type":"blocks","created_at":"2026-01-03T16:14:10.944559528-05:00","created_by":"daemon"},{"issue_id":"bd-804","depends_on_id":"bd-803","type":"blocks","created_at":"2026-01-03T16:14:10.972973846-05:00","created_by":"daemon"}]}
{"id":"bd-805","title":"Implement do_fetch()","description":"**Fetch updates without merging**\n\n## What\nFunction to fetch from remote without changing working directory.\n\n## Why\nFor status command, we want to see ahead/behind counts without changing anything.\n\n## Implementation\n```bash\ndo_fetch() {\n    local repo_path=\"$1\"\n    local repo_name=\"$2\"\n\n    if [[ \"$DRY_RUN\" == \"true\" ]]; then\n        log_info \"[DRY RUN] Would fetch: $repo_name\"\n        return 0\n    fi\n\n    if git -C \"$repo_path\" fetch --quiet 2\u003e\u00261; then\n        return 0\n    else\n        log_warn \"Fetch failed for: $repo_name\"\n        return 1\n    fi\n}\n```\n\n## Acceptance Criteria\n- Fetches without merging\n- Respects dry run\n- Fails gracefully","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["git"],"dependencies":[{"issue_id":"bd-805","depends_on_id":"bd-801","type":"blocks","created_at":"2026-01-03T16:14:11.003209226-05:00","created_by":"daemon"}]}
{"id":"bd-806","title":"Implement do_clone()","description":"**Clone repository with gh**\n\n## What\nFunction to clone a repository using gh repo clone.\n\n## Why\ngh handles authentication automatically and works with private repos.\n\n## Implementation\n```bash\ndo_clone() {\n    local url=\"$1\"\n    local target_dir=\"$2\"\n    local repo_name=\"$3\"\n\n    if [[ \"$DRY_RUN\" == \"true\" ]]; then\n        log_info \"[DRY RUN] Would clone: $url -\u003e $target_dir\"\n        write_result \"$repo_name\" \"clone\" \"dry_run\" \"\" \"\"\n        return 0\n    fi\n\n    local clone_target\n    clone_target=$(url_to_clone_target \"$url\")\n\n    local start_time\n    start_time=$(date +%s)\n\n    # Create parent directory\n    mkdir -p \"$(dirname \"$target_dir\")\"\n\n    local output\n    if output=$(gh repo clone \"$clone_target\" \"$target_dir\" -- --quiet 2\u003e\u00261); then\n        local duration=$(($(date +%s) - start_time))\n        log_success \"Cloned: $repo_name (${duration}s)\"\n        write_result \"$repo_name\" \"clone\" \"ok\" \"$duration\" \"\"\n        return 0\n    else\n        local exit_code=$?\n        log_error \"Failed to clone: $repo_name\"\n        log_error \"  $output\"\n        write_result \"$repo_name\" \"clone\" \"failed\" \"\" \"$output\"\n        return $exit_code\n    fi\n}\n```\n\n## Key Points\n- Uses `git -C` pattern (no cd)\n- Creates parent directories\n- Records timing\n- Writes result for aggregation\n\n## Acceptance Criteria\n- Clones successfully\n- Handles errors gracefully\n- Records results\n- Respects dry run","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["git"],"dependencies":[{"issue_id":"bd-806","depends_on_id":"bd-704","type":"blocks","created_at":"2026-01-03T16:14:11.033638801-05:00","created_by":"daemon"},{"issue_id":"bd-806","depends_on_id":"bd-405","type":"blocks","created_at":"2026-01-03T16:14:11.06326344-05:00","created_by":"daemon"}]}
{"id":"bd-807","title":"Implement do_pull()","description":"**Pull with strategy support**\n\n## What\nFunction to pull updates with configurable strategy (ff-only, rebase, merge).\n\n## Why\nDifferent workflows need different pull strategies. ff-only is safe default, but some users prefer rebase.\n\n## Implementation\n```bash\ndo_pull() {\n    local repo_path=\"$1\"\n    local repo_name=\"$2\"\n    local strategy=\"${3:-ff-only}\"\n    local autostash=\"${4:-false}\"\n\n    if [[ \"$DRY_RUN\" == \"true\" ]]; then\n        log_info \"[DRY RUN] Would pull: $repo_name (strategy: $strategy)\"\n        write_result \"$repo_name\" \"pull\" \"dry_run\" \"\" \"\"\n        return 0\n    fi\n\n    local start_time\n    start_time=$(date +%s)\n\n    # Build pull args\n    local pull_args=()\n    case \"$strategy\" in\n        ff-only) pull_args+=(--ff-only) ;;\n        rebase)  pull_args+=(--rebase) ;;\n        merge)   pull_args+=(--no-ff) ;;\n    esac\n\n    [[ \"$autostash\" == \"true\" ]] \u0026\u0026 pull_args+=(--autostash)\n\n    # Get current HEAD for comparison\n    local old_head\n    old_head=$(git -C \"$repo_path\" rev-parse HEAD 2\u003e/dev/null || echo \"\")\n\n    local output\n    if output=$(git -C \"$repo_path\" pull \"${pull_args[@]}\" 2\u003e\u00261); then\n        local duration=$(($(date +%s) - start_time))\n        local new_head\n        new_head=$(git -C \"$repo_path\" rev-parse HEAD 2\u003e/dev/null || echo \"\")\n\n        if [[ \"$old_head\" == \"$new_head\" ]]; then\n            log_info \"Already current: $repo_name\"\n            write_result \"$repo_name\" \"pull\" \"current\" \"$duration\" \"\"\n        else\n            log_success \"Pulled: $repo_name (${duration}s)\"\n            write_result \"$repo_name\" \"pull\" \"updated\" \"$duration\" \"\"\n        fi\n        return 0\n    else\n        local exit_code=$?\n        local reason=\"failed\"\n\n        if [[ \"$output\" =~ (divergent|cannot\\ be\\ fast-forwarded) ]]; then\n            reason=\"diverged\"\n            log_warn \"Diverged: $repo_name (needs manual merge or --rebase)\"\n        elif [[ \"$output\" =~ (conflict|CONFLICT) ]]; then\n            reason=\"conflict\"\n            log_error \"Merge conflict: $repo_name\"\n        else\n            log_error \"Pull failed: $repo_name\"\n        fi\n\n        write_result \"$repo_name\" \"pull\" \"$reason\" \"\" \"$output\"\n        return $exit_code\n    fi\n}\n```\n\n## Acceptance Criteria\n- All strategies work\n- Detects current vs updated (by comparing HEADs, not strings)\n- Categorizes failures correctly\n- Records results","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["git"],"dependencies":[{"issue_id":"bd-807","depends_on_id":"bd-802","type":"blocks","created_at":"2026-01-03T16:14:11.094464008-05:00","created_by":"daemon"},{"issue_id":"bd-807","depends_on_id":"bd-405","type":"blocks","created_at":"2026-01-03T16:14:11.126330962-05:00","created_by":"daemon"}]}
{"id":"bd-808","title":"Create scripts/test_local_git.sh","description":"**Integration tests with local git repos**\n\n## What\nTest script that creates local git repos and tests operations against them.\n\n## Why\nWe can't rely on network for CI tests. Local repos let us test all scenarios deterministically.\n\n## Test Scenarios\n```bash\n# Setup\nTEMP_DIR=$(mktemp -d)\ntrap \"rm -rf $TEMP_DIR\" EXIT\n\n# Create 'remote' bare repo\ngit init --bare \"$TEMP_DIR/remote.git\"\n\n# Clone and make commits\ngit clone \"$TEMP_DIR/remote.git\" \"$TEMP_DIR/local\"\ncd \"$TEMP_DIR/local\"\necho \"initial\" \u003e file.txt\ngit add . \u0026\u0026 git commit -m \"Initial\"\ngit push origin main\n\n# Create 'projects dir' clone\ngit clone \"$TEMP_DIR/remote.git\" \"$TEMP_DIR/projects/testrepo\"\n\n# Make new commit in 'remote' (via local)\necho \"update\" \u003e\u003e \"$TEMP_DIR/local/file.txt\"\ngit -C \"$TEMP_DIR/local\" add . \u0026\u0026 git -C \"$TEMP_DIR/local\" commit -m \"Update\"\ngit -C \"$TEMP_DIR/local\" push\n\n# Test: status should show 'behind'\n# Test: pull should update\n# Test: dirty detection\n# Test: diverged detection\n```\n\n## Acceptance Criteria\n- Tests run without network\n- All status conditions tested\n- CI can run this script","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["git","testing"],"dependencies":[{"issue_id":"bd-808","depends_on_id":"bd-802","type":"blocks","created_at":"2026-01-03T16:14:11.156263651-05:00","created_by":"daemon"},{"issue_id":"bd-808","depends_on_id":"bd-806","type":"blocks","created_at":"2026-01-03T16:14:11.186539707-05:00","created_by":"daemon"},{"issue_id":"bd-808","depends_on_id":"bd-807","type":"blocks","created_at":"2026-01-03T16:14:11.216416421-05:00","created_by":"daemon"}]}
{"id":"bd-809","title":"Handle branch not found gracefully","description":"**Graceful handling when repo@branch branch doesn't exist**\n\n## What\nWhen user specifies repo@branch and branch doesn't exist, handle gracefully.\n\n## Why\nBranches get deleted, renamed, or typos happen. Current plan doesn't address this.\n\n## Behavior\n```\n$ ru sync owner/repo@nonexistent\nCloning: owner/repo\n  Warning: Branch 'nonexistent' not found\n  Falling back to default branch (main)\n```\n\n## Implementation\n```bash\ndo_clone() {\n    # ... clone repo ...\n    \n    if [[ -n \"$branch\" ]]; then\n        if git -C \"$target_dir\" rev-parse --verify \"origin/$branch\" \u0026\u003e/dev/null; then\n            git -C \"$target_dir\" checkout \"$branch\" --quiet\n        else\n            log_warn \"Branch '$branch' not found, using default branch\"\n            write_result \"$repo_name\" \"clone\" \"branch_not_found\" \"\" \"Branch: $branch\"\n        fi\n    fi\n}\n```\n\n## Acceptance Criteria\n- Clone succeeds with warning\n- Default branch used as fallback\n- Result recorded for summary\n- User informed clearly","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["error-handling","git"],"dependencies":[{"issue_id":"bd-809","depends_on_id":"bd-8","type":"blocks","created_at":"2026-01-03T16:14:13.797824099-05:00","created_by":"daemon"},{"issue_id":"bd-809","depends_on_id":"bd-902","type":"blocks","created_at":"2026-01-03T16:14:13.828864235-05:00","created_by":"daemon"}]}
{"id":"bd-810","title":"Handle network timeouts gracefully","description":"**Handle network timeouts gracefully**\n\n## What\nAdd timeout handling for clone and pull operations.\n\n## Why\nFlaky networks, slow connections, or overloaded servers can cause operations to hang indefinitely. Users need a way to bound wait time.\n\n## Implementation\n- Set GIT_HTTP_LOW_SPEED_LIMIT=1000 and GIT_HTTP_LOW_SPEED_TIME=30 as defaults\n- These cause git to abort if transfer rate drops below 1KB/s for 30 seconds\n- Add --timeout N option to override (sets GIT_HTTP_LOW_SPEED_TIME)\n- On timeout, log error and continue to next repo\n- Report timeouts distinctly in summary (not just 'failed')\n\n## Acceptance Criteria\n- Slow operations time out after reasonable period\n- Timeout errors are clearly reported\n- Other repos continue processing after timeout\n- Timeout can be configured via flag or config","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["resilience"],"dependencies":[{"issue_id":"bd-810","depends_on_id":"bd-8","type":"blocks","created_at":"2026-01-03T16:14:13.921445046-05:00","created_by":"daemon"},{"issue_id":"bd-810","depends_on_id":"bd-806","type":"blocks","created_at":"2026-01-03T16:14:13.952318959-05:00","created_by":"daemon"},{"issue_id":"bd-810","depends_on_id":"bd-807","type":"blocks","created_at":"2026-01-03T16:14:13.981841826-05:00","created_by":"daemon"}]}
{"id":"bd-9","title":"Phase 9: Repo List Management","description":"**EPIC: Repository List Loading \u0026 Management**\n\n## Goal\nImplement robust loading, parsing, and deduplication of repository lists from config files.\n\n## Rationale\nUsers maintain lists of repos to sync. These lists support comments, blank lines, branch pinning (repo@branch), and custom local names (repo as custom-name). We must parse all this robustly and handle edge cases.\n\n## List File Format\n```\n# Comments start with #\n# Blank lines are ignored\n\nhttps://github.com/owner/repo\nowner/repo\nowner/repo@develop\nowner/repo as custom-name\n```\n\n## Deduplication\nMultiple list files may reference the same repo. We dedupe by resolved local path, keeping the first occurrence. This prevents double-processing.\n\n## Future: Tags\nWe're reserving syntax for tags: `owner/repo #tag=backend`. Not implementing now, but the parser should not break on this.\n\n## Success Criteria\n- List files parse correctly with all syntax variants\n- Comments and blank lines are skipped\n- Duplicates are detected and deduplicated\n- Collisions are warned about","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["lists","repos"],"dependencies":[{"issue_id":"bd-9","depends_on_id":"bd-3","type":"blocks","created_at":"2026-01-03T16:14:08.218431105-05:00","created_by":"daemon"},{"issue_id":"bd-9","depends_on_id":"bd-7","type":"blocks","created_at":"2026-01-03T16:14:08.246730918-05:00","created_by":"daemon"}]}
{"id":"bd-901","title":"Implement load_repo_list()","description":"**Parse repository list file**\n\n## What\nFunction to load repos from a list file, skipping comments and blank lines.\n\n## Why\nList files are the primary way users specify repos. We need robust parsing.\n\n## List Format\n```\n# Comment lines\n# Blank lines ignored\n\nhttps://github.com/owner/repo\nowner/repo\nowner/repo@branch\nowner/repo as custom-name\n```\n\n## Implementation\n```bash\nload_repo_list() {\n    local file=\"$1\"\n    \n    if [[ ! -f \"$file\" ]]; then\n        return 0  # Empty list, not an error\n    fi\n    \n    while IFS= read -r line || [[ -n \"$line\" ]]; do\n        # Skip empty lines and comments\n        [[ -z \"$line\" || \"$line\" =~ ^[[:space:]]*# ]] \u0026\u0026 continue\n        \n        # Trim whitespace\n        line=\"${line#\"${line%%[![:space:]]*}\"}\"\n        line=\"${line%\"${line##*[![:space:]]}\"}\"\n        \n        echo \"$line\"\n    done \u003c \"$file\"\n}\n```\n\n## Acceptance Criteria\n- Skips comments (#)\n- Skips blank lines\n- Trims whitespace\n- Handles missing file gracefully","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["lists"],"dependencies":[{"issue_id":"bd-901","depends_on_id":"bd-9","type":"blocks","created_at":"2026-01-03T16:14:11.244259733-05:00","created_by":"daemon"}]}
{"id":"bd-902","title":"Implement parse_repo_spec()","description":"**Parse repo specification with optional branch/name**\n\n## What\nFunction to parse `repo@branch` and `repo as custom-name` syntax.\n\n## Why\nUsers need to pin branches and customize local directory names.\n\n## Syntax Patterns\n- `owner/repo` -\u003e repo, default branch, repo as name\n- `owner/repo@develop` -\u003e repo, develop branch, repo as name\n- `owner/repo as myname` -\u003e repo, default branch, myname as name\n- `owner/repo@develop as myname` -\u003e repo, develop branch, myname as name\n\n## Implementation\n```bash\nparse_repo_spec() {\n    local spec=\"$1\"\n    local -n _url=$2\n    local -n _branch=$3\n    local -n _local_name=$4\n    \n    # Extract 'as \u003cname\u003e' if present\n    if [[ \"$spec\" =~ ^(.+)[[:space:]]+as[[:space:]]+(.+)$ ]]; then\n        spec=\"${BASH_REMATCH[1]}\"\n        _local_name=\"${BASH_REMATCH[2]}\"\n    else\n        _local_name=\"\"\n    fi\n    \n    # Extract '@branch' if present\n    if [[ \"$spec\" =~ ^(.+)@([^@]+)$ ]]; then\n        _url=\"${BASH_REMATCH[1]}\"\n        _branch=\"${BASH_REMATCH[2]}\"\n    else\n        _url=\"$spec\"\n        _branch=\"\"\n    fi\n}\n```\n\n## Acceptance Criteria\n- All syntax patterns work\n- Returns empty for optional parts\n- Handles edge cases","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["lists","parsing"],"dependencies":[{"issue_id":"bd-902","depends_on_id":"bd-701","type":"blocks","created_at":"2026-01-03T16:14:11.274168778-05:00","created_by":"daemon"},{"issue_id":"bd-902","depends_on_id":"bd-901","type":"blocks","created_at":"2026-01-03T16:14:11.302284824-05:00","created_by":"daemon"}]}
{"id":"bd-903","title":"Implement dedupe_repos()","description":"**Remove duplicate repositories by local path**\n\n## What\nFunction to deduplicate repos that would resolve to the same local path.\n\n## Why\nMultiple list files or formats might reference the same repo. We process each path only once.\n\n## Implementation\n```bash\ndedupe_repos() {\n    # Input: lines of repo specs\n    # Output: unique repo specs by resolved path\n    \n    local -A seen_paths\n    \n    while IFS= read -r spec; do\n        local url branch local_name\n        parse_repo_spec \"$spec\" url branch local_name\n        \n        local path\n        if [[ -n \"$local_name\" ]]; then\n            path=\"$PROJECTS_DIR/$local_name\"\n        else\n            path=$(url_to_local_path \"$url\" \"$PROJECTS_DIR\" \"$LAYOUT\")\n        fi\n        \n        if [[ -z \"${seen_paths[$path]:-}\" ]]; then\n            seen_paths[$path]=1\n            echo \"$spec\"\n        else\n            log_debug \"Skipping duplicate: $spec (same path as previous)\"\n        fi\n    done\n}\n```\n\n## Acceptance Criteria\n- First occurrence kept\n- Duplicates logged (debug)\n- Works with custom names","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["lists"],"dependencies":[{"issue_id":"bd-903","depends_on_id":"bd-703","type":"blocks","created_at":"2026-01-03T16:14:11.334028255-05:00","created_by":"daemon"},{"issue_id":"bd-903","depends_on_id":"bd-901","type":"blocks","created_at":"2026-01-03T16:14:11.363694662-05:00","created_by":"daemon"}]}
{"id":"bd-904","title":"Implement detect_collisions()","description":"**Warn about path collisions**\n\n## What\nFunction to detect when different repos would resolve to the same local path.\n\n## Why\nWith flat layout, org1/utils and org2/utils collide. Users need to know before we overwrite.\n\n## Difference from dedupe\n- dedupe: Same repo referenced twice (ok, skip second)\n- collision: Different repos mapping to same path (warning!)\n\n## Implementation\n```bash\ndetect_collisions() {\n    local -A path_to_url\n    local collisions=0\n    \n    while IFS= read -r spec; do\n        local url branch local_name\n        parse_repo_spec \"$spec\" url branch local_name\n        \n        local path\n        path=$(url_to_local_path \"$url\" \"$PROJECTS_DIR\" \"$LAYOUT\")\n        \n        local norm_url\n        norm_url=$(normalize_url \"$url\")\n        \n        if [[ -n \"${path_to_url[$path]:-}\" ]]; then\n            local existing=\"${path_to_url[$path]}\"\n            if [[ \"$existing\" != \"$norm_url\" ]]; then\n                log_warn \"Collision detected: $path\"\n                log_warn \"  URL 1: $existing\"\n                log_warn \"  URL 2: $norm_url\"\n                ((collisions++))\n            fi\n        else\n            path_to_url[$path]=\"$norm_url\"\n        fi\n    done\n    \n    return $collisions\n}\n```\n\n## Acceptance Criteria\n- Detects different repos at same path\n- Doesn't flag same repo twice\n- Returns collision count","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["lists","safety"],"dependencies":[{"issue_id":"bd-904","depends_on_id":"bd-703","type":"blocks","created_at":"2026-01-03T16:14:11.391710099-05:00","created_by":"daemon"},{"issue_id":"bd-904","depends_on_id":"bd-901","type":"blocks","created_at":"2026-01-03T16:14:11.422048533-05:00","created_by":"daemon"}]}
{"id":"bd-905","title":"Implement get_all_repos()","description":"**Load and merge all repository lists**\n\n## What\nFunction to load all list files, merge, dedupe, and check for collisions.\n\n## Why\nThis is the main entry point for getting the list of repos to process.\n\n## Implementation\n```bash\nget_all_repos() {\n    local repos_dir=\"$RU_CONFIG_DIR/repos.d\"\n    \n    if [[ ! -d \"$repos_dir\" ]]; then\n        log_warn \"No repos.d directory. Run 'ru init' first.\"\n        return 0\n    fi\n    \n    # Collect all repos from all .txt files\n    local all_repos\n    all_repos=$(\n        for f in \"$repos_dir\"/*.txt; do\n            [[ -f \"$f\" ]] || continue\n            load_repo_list \"$f\"\n        done\n    )\n    \n    if [[ -z \"$all_repos\" ]]; then\n        log_warn \"No repositories configured. Run 'ru add \u003crepo\u003e' first.\"\n        return 0\n    fi\n    \n    # Check for collisions (warning only)\n    echo \"$all_repos\" | detect_collisions || true\n    \n    # Dedupe and output\n    echo \"$all_repos\" | dedupe_repos\n}\n```\n\n## Acceptance Criteria\n- Loads from all .txt files in repos.d\n- Warns about collisions\n- Dedupes results\n- Handles empty gracefully","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["lists"],"dependencies":[{"issue_id":"bd-905","depends_on_id":"bd-901","type":"blocks","created_at":"2026-01-03T16:14:11.451307773-05:00","created_by":"daemon"},{"issue_id":"bd-905","depends_on_id":"bd-903","type":"blocks","created_at":"2026-01-03T16:14:11.482195622-05:00","created_by":"daemon"},{"issue_id":"bd-905","depends_on_id":"bd-904","type":"blocks","created_at":"2026-01-03T16:14:11.513296182-05:00","created_by":"daemon"}]}
{"id":"bd-905b","title":"Define collision handling policy","description":"**Clear policy for path collision handling**\n\n## What\nDefine what happens when collision is detected (different repos -\u003e same path).\n\n## Why\nCurrent plan detects collisions but doesn't specify the behavior.\n\n## Policy Options\n1. **Warn and skip second repo** (safest, current implicit behavior)\n2. **Fail fast** (strict, stops processing)\n3. **Prompt user** (interactive only)\n4. **Auto-rename with suffix** (risky)\n\n## Chosen Policy: Warn and skip\n```\nCollision detected:\n  Path: /home/user/projects/utils\n  Configured: org1/utils (will be synced)\n  Skipped:    org2/utils (same path)\n\nTo fix: Change layout to 'owner-repo' in config:\n  ru config --set LAYOUT=owner-repo\n```\n\n## Implementation\n- First occurrence wins\n- Log warning with resolution hint\n- Include in summary as 'skipped:collision'\n- Exit code 2 (conflicts) if any collisions\n\n## Acceptance Criteria\n- Clear messaging about collision\n- First-wins policy\n- Resolution hint in output\n- Documented in README","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-03T16:10:05.881422408-05:00","updated_at":"2026-01-03T16:10:05.881422408-05:00","labels":["lists","safety"],"dependencies":[{"issue_id":"bd-905b","depends_on_id":"bd-9","type":"blocks","created_at":"2026-01-03T16:14:13.858988726-05:00","created_by":"daemon"},{"issue_id":"bd-905b","depends_on_id":"bd-904","type":"blocks","created_at":"2026-01-03T16:14:13.890572977-05:00","created_by":"daemon"}]}
{"id":"bd-zki","title":"Test task","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-03T16:08:45.034918173-05:00","updated_at":"2026-01-03T16:15:28.281051598-05:00","closed_at":"2026-01-03T16:15:28.281051598-05:00","close_reason":"Test issue - removing"}
